<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Untitled</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="Jovenes_files/libs/clipboard/clipboard.min.js"></script>
<script src="Jovenes_files/libs/quarto-html/quarto.js"></script>
<script src="Jovenes_files/libs/quarto-html/popper.min.js"></script>
<script src="Jovenes_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Jovenes_files/libs/quarto-html/anchor.min.js"></script>
<link href="Jovenes_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Jovenes_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Jovenes_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Jovenes_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Jovenes_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Untitled</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="importar-datos" class="level2">
<h2 class="anchored" data-anchor-id="importar-datos">Importar datos</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.4
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.4.4     ✔ tibble    3.2.1
✔ lubridate 1.9.3     ✔ tidyr     1.3.0
✔ purrr     1.0.2     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggpubr)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(haven)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"Microdatos2021/Personas/R/CensoPersonas_2021.RData"</span>)</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>microdatos2021 <span class="ot">&lt;-</span> Microdatos</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>metadatos2021 <span class="ot">&lt;-</span> Metadatos</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>microdatos2011 <span class="ot">&lt;-</span> <span class="fu">read_sav</span>(<span class="st">"Microdatos2011/Personas/poblacion_2011_v2.sav"</span>)</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(Microdatos, Metadatos)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="recodificaciones" class="level2">
<h2 class="anchored" data-anchor-id="recodificaciones">Recodificaciones</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>microdatos2021_rec <span class="ot">&lt;-</span> microdatos2021 <span class="sc">|&gt;</span> </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">HABITAT =</span> <span class="fu">case_when</span>(</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>      CMUN <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">991</span>, <span class="dv">992</span>, <span class="dv">993</span>) <span class="sc">~</span> <span class="st">"Rural"</span>,</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>      CMUN <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">666</span>, <span class="dv">999</span>) <span class="sc">~</span> <span class="cn">NA</span>,</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Urbano"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">TENEN_VIV =</span> <span class="fu">case_when</span>(</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>      TENEN_VIV <span class="sc">==</span> <span class="dv">2</span> <span class="sc">~</span> <span class="st">"Propiedad"</span>,</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>      TENEN_VIV <span class="sc">==</span> <span class="dv">3</span> <span class="sc">~</span> <span class="st">"Alquiler"</span>,</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>      TENEN_VIV <span class="sc">==</span> <span class="dv">4</span> <span class="sc">~</span> <span class="st">"Otro"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">JOVEN =</span> <span class="fu">case_when</span>(</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>      VAREDAD <span class="sc">&gt;=</span> <span class="dv">18</span> <span class="sc">&amp;</span> VAREDAD <span class="sc">&lt;</span> <span class="dv">35</span> <span class="sc">~</span> <span class="st">"Joven"</span>,</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>      VAREDAD <span class="sc">&gt;=</span> <span class="dv">35</span> <span class="sc">~</span> <span class="st">"Adulto"</span>,</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>      VAREDAD <span class="sc">&lt;</span> <span class="dv">18</span> <span class="sc">~</span> <span class="st">"Niño"</span>,</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA</span>))</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a><span class="do">## Filtrar microdatos</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>jovenes <span class="ot">&lt;-</span> microdatos2021_rec <span class="sc">|&gt;</span> </span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(CPRO, CMUN, VAREDAD, TENEN_VIV, HABITAT, JOVEN) <span class="sc">|&gt;</span></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(  </span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">CPRO =</span> <span class="fu">trimws</span>(CPRO),</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">CMUN =</span> <span class="fu">trimws</span>(CMUN),</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">cusec =</span> <span class="fu">paste0</span>(CPRO, CMUN)) <span class="sc">|&gt;</span> </span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(JOVEN <span class="sc">==</span> <span class="st">"Joven"</span>)</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(metadatos2021)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="ccaa" class="level3">
<h3 class="anchored" data-anchor-id="ccaa">CCAA</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Añadir CCAA </span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>ccaas <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">CodigoProvincia =</span> <span class="fu">c</span>(<span class="st">"01"</span>, <span class="st">"02"</span>, <span class="st">"03"</span>, <span class="st">"04"</span>, <span class="st">"33"</span>, <span class="st">"05"</span>, <span class="st">"06"</span>, <span class="st">"08"</span>, <span class="st">"09"</span>, <span class="st">"10"</span>, <span class="st">"11"</span>, <span class="st">"39"</span>, <span class="st">"12"</span>, <span class="st">"13"</span>, <span class="st">"14"</span>, <span class="st">"16"</span>, <span class="st">"17"</span>, <span class="st">"18"</span>, <span class="st">"19"</span>, <span class="st">"20"</span>, <span class="st">"21"</span>, <span class="st">"22"</span>, <span class="st">"23"</span>, <span class="st">"07"</span>, <span class="st">"24"</span>, <span class="st">"15"</span>, <span class="st">"35"</span>, <span class="st">"25"</span>, <span class="st">"26"</span>, <span class="st">"27"</span>, <span class="st">"28"</span>, <span class="st">"29"</span>, <span class="st">"30"</span>, <span class="st">"31"</span>, <span class="st">"32"</span>, <span class="st">"34"</span>, <span class="st">"36"</span>, <span class="st">"37"</span>,</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="st">"38"</span>, <span class="st">"39"</span>, <span class="st">"40"</span>, <span class="st">"41"</span>, <span class="st">"42"</span>, <span class="st">"43"</span>, <span class="st">"44"</span>, <span class="st">"45"</span>, <span class="st">"46"</span>, <span class="st">"47"</span>, <span class="st">"48"</span>, <span class="st">"49"</span>, <span class="st">"50"</span>, <span class="st">"51"</span>, <span class="st">"52"</span>),</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">CCAA =</span> <span class="fu">c</span>(<span class="st">"País Vasco"</span>, <span class="st">"Castilla-La Mancha"</span>, <span class="st">"Comunidad Valenciana"</span>, <span class="st">"Andalucía"</span>, <span class="st">"Asturias"</span>, <span class="st">"Castilla y León"</span>, <span class="st">"Extremadura"</span>, <span class="st">"Cataluña"</span>, <span class="st">"Castilla y León"</span>, <span class="st">"Extremadura"</span>, <span class="st">"Andalucía"</span>, <span class="st">"Cantabria"</span>, <span class="st">"Comunidad Valenciana"</span>, <span class="st">"Castilla-La Mancha"</span>, <span class="st">"Andalucía"</span>, <span class="st">"Castilla-La Mancha"</span>, <span class="st">"Cataluña"</span>, <span class="st">"Andalucía"</span>, <span class="st">"Castilla-La Mancha"</span>, <span class="st">"País Vasco"</span>, <span class="st">"Andalucía"</span>, <span class="st">"Aragón"</span>, <span class="st">"Andalucía"</span>, <span class="st">"Islas Baleares"</span>, <span class="st">"Castilla y León"</span>, <span class="st">"Galicia"</span>, <span class="st">"Canarias"</span>, <span class="st">"Cataluña"</span>, <span class="st">"La Rioja"</span>, <span class="st">"Galicia"</span>, <span class="st">"Comunidad de Madrid"</span>, <span class="st">"Andalucía"</span>, <span class="st">"Comunidad de Murcia"</span>, <span class="st">"Comunidad Foral de Navarra"</span>, <span class="st">"Galicia"</span>, <span class="st">"Castilla y León"</span>, <span class="st">"Galicia"</span>, <span class="st">"Castilla y León"</span>, <span class="st">"Canarias"</span>, <span class="st">"Cantabria"</span>, <span class="st">"Castilla y León"</span>, <span class="st">"Andalucía"</span>, <span class="st">"Castilla y León"</span>, <span class="st">"Cataluña"</span>, <span class="st">"Aragón"</span>, <span class="st">"Castilla-La Mancha"</span>, <span class="st">"Comunidad Valenciana"</span>, <span class="st">"Castilla y León"</span>, <span class="st">"País Vasco"</span>, <span class="st">"Castilla y León"</span>, <span class="st">"Aragón"</span>, <span class="st">"Ceuta"</span>, <span class="st">"Melilla"</span>))</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>jovenes <span class="ot">&lt;-</span> jovenes <span class="sc">|&gt;</span> </span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(ccaas, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"CPRO"</span> <span class="ot">=</span> <span class="st">"CodigoProvincia"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in left_join(jovenes, ccaas, by = c(CPRO = "CodigoProvincia")): Detected an unexpected many-to-many relationship between `x` and `y`.
ℹ Row 67 of `x` matches multiple rows in `y`.
ℹ Row 49 of `y` matches multiple rows in `x`.
ℹ If a many-to-many relationship is expected, set `relationship =
  "many-to-many"` to silence this warning.</code></pre>
</div>
</div>
</section>
</section>
<section id="probabilidad-compraalquilerotros-de-jóvenes-en-2021" class="level2">
<h2 class="anchored" data-anchor-id="probabilidad-compraalquilerotros-de-jóvenes-en-2021">Probabilidad compra/alquiler/otros de jóvenes en 2021</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>jovenes <span class="ot">&lt;-</span> jovenes <span class="sc">|&gt;</span> </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>VAREDAD)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Por municipio</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>jovenes <span class="ot">&lt;-</span> jovenes <span class="sc">|&gt;</span> </span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(cusec) <span class="sc">|&gt;</span> </span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">Propiedad21Mun =</span> <span class="fu">round</span>((<span class="fu">sum</span>(TENEN_VIV <span class="sc">==</span> <span class="st">"Propiedad"</span>) <span class="sc">/</span> <span class="fu">n</span>()) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>),</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">Alquiler21Mun =</span> <span class="fu">round</span>((<span class="fu">sum</span>(TENEN_VIV <span class="sc">==</span> <span class="st">"Alquiler"</span>) <span class="sc">/</span> <span class="fu">n</span>()) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>),</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">Otro21Mun =</span> <span class="fu">round</span>((<span class="fu">sum</span>(TENEN_VIV <span class="sc">==</span> <span class="st">"Otro"</span>) <span class="sc">/</span> <span class="fu">n</span>()) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>))</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Por provincia</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>jovenes <span class="ot">&lt;-</span> jovenes <span class="sc">|&gt;</span> </span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(CPRO) <span class="sc">|&gt;</span> </span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">Propiedad21Prov =</span> <span class="fu">round</span>((<span class="fu">sum</span>(TENEN_VIV <span class="sc">==</span> <span class="st">"Propiedad"</span>) <span class="sc">/</span> <span class="fu">n</span>()) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>),</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">Alquiler21Prov =</span> <span class="fu">round</span>((<span class="fu">sum</span>(TENEN_VIV <span class="sc">==</span> <span class="st">"Alquiler"</span>) <span class="sc">/</span> <span class="fu">n</span>()) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>),</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">Otro21Prov =</span> <span class="fu">round</span>((<span class="fu">sum</span>(TENEN_VIV <span class="sc">==</span> <span class="st">"Otro"</span>) <span class="sc">/</span> <span class="fu">n</span>()) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>))</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Por CCAA</span></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>jovenes <span class="ot">&lt;-</span> jovenes <span class="sc">|&gt;</span> </span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(CCAA) <span class="sc">|&gt;</span> </span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">Propiedad21CCAA =</span> <span class="fu">round</span>((<span class="fu">sum</span>(TENEN_VIV <span class="sc">==</span> <span class="st">"Propiedad"</span>) <span class="sc">/</span> <span class="fu">n</span>()) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>),</span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">Alquiler21CCAA =</span> <span class="fu">round</span>((<span class="fu">sum</span>(TENEN_VIV <span class="sc">==</span> <span class="st">"Alquiler"</span>) <span class="sc">/</span> <span class="fu">n</span>()) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>),</span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">Otro21CCAA =</span> <span class="fu">round</span>((<span class="fu">sum</span>(TENEN_VIV <span class="sc">==</span> <span class="st">"Otro"</span>) <span class="sc">/</span> <span class="fu">n</span>()) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>))</span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Por municipios rurales</span></span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Esto hace que desaparezcan CPRO 51 y 52</span></span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a><span class="co">#jovenes &lt;- jovenes |&gt; </span></span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a><span class="co">#  filter(HABITAT == "Rural") |&gt; </span></span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a><span class="co">#  mutate(</span></span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a><span class="co">#    Propiedad21Rural = round((sum(HABITAT == "Rural") / n()) * 100, 2),</span></span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a><span class="co">#    Alquiler21Rural = round((sum(HABITAT == "Rural") / n()) * 100, 2),</span></span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a><span class="co">#    Otro21Rural = round((sum(HABITAT == "Rural") / n()) * 100, 2))</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Ahora reordenamos y eliminamos algunas variables</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>jovenes <span class="ot">&lt;-</span> jovenes <span class="sc">|&gt;</span> </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(cusec, CCAA, CPRO, CMUN,  HABITAT, Propiedad21Mun, Alquiler21Mun, Otro21Mun, Propiedad21Prov, Alquiler21Prov, Otro21Prov, Propiedad21CCAA, Alquiler21CCAA, Otro21CCAA)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="microdatos-2011" class="level2">
<h2 class="anchored" data-anchor-id="microdatos-2011">Microdatos 2011</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>variables <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"CPRO"</span>, <span class="st">"CMUN"</span>, <span class="st">"EDAD"</span>, <span class="st">"TENEN"</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>microdatos2011_limpio <span class="ot">&lt;-</span> microdatos2011 <span class="sc">|&gt;</span> </span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="fu">all_of</span>(variables))</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a> jovenes11 <span class="ot">&lt;-</span> microdatos2011_limpio <span class="sc">|&gt;</span> </span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>     <span class="at">HABITAT =</span> <span class="fu">case_when</span>(</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>       CMUN <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">991</span>, <span class="dv">992</span>, <span class="dv">993</span>, <span class="dv">994</span>) <span class="sc">~</span> <span class="st">"Rural"</span>,</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>       <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Urbano"</span>))<span class="sc">|&gt;</span> </span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">TENEN_r =</span> <span class="fu">case_when</span>(</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>      TENEN <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">"Propiedad"</span>,</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>      TENEN <span class="sc">==</span> <span class="dv">2</span> <span class="sc">~</span> <span class="st">"Hipoteca"</span>,</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>      TENEN <span class="sc">==</span> <span class="dv">3</span> <span class="sc">~</span> <span class="st">"Herencia o donación"</span>,</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>      TENEN <span class="sc">==</span> <span class="dv">4</span> <span class="sc">~</span> <span class="st">"Alquiler"</span>,</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>      TENEN <span class="sc">==</span> <span class="dv">5</span> <span class="sc">~</span> <span class="st">"Cedida o a bajo precio"</span>,</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>      TENEN <span class="sc">==</span> <span class="dv">6</span> <span class="sc">~</span> <span class="st">"Otro"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(</span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>     <span class="at">TENEN_VIV =</span> <span class="fu">case_when</span>(</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>       TENEN_r <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Propiedad"</span>, <span class="st">"Hipoteca"</span>, <span class="st">"Herencia o donación"</span>) <span class="sc">~</span> <span class="st">"Propiedad"</span>,</span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>       TENEN_r <span class="sc">==</span> <span class="st">"Alquiler"</span> <span class="sc">~</span> <span class="st">"Alquiler"</span>,</span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>       TENEN_r <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Cedida o a bajo precio"</span>, <span class="st">"Otro"</span>) <span class="sc">~</span> <span class="st">"Otro"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">JOVEN =</span> <span class="fu">case_when</span>(</span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>      EDAD <span class="sc">&gt;=</span> <span class="dv">18</span> <span class="sc">&amp;</span> EDAD <span class="sc">&lt;</span> <span class="dv">35</span> <span class="sc">~</span> <span class="st">"Joven"</span>,</span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>      EDAD <span class="sc">&gt;=</span> <span class="dv">35</span> <span class="sc">~</span> <span class="st">"Adulto"</span>,</span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a>      EDAD <span class="sc">&lt;</span> <span class="dv">18</span> <span class="sc">~</span> <span class="st">"Niño"</span>,</span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA</span> )) <span class="sc">|&gt;</span> </span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(</span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">CMUN =</span> <span class="fu">str_pad</span>(CMUN, <span class="at">width =</span> <span class="dv">3</span>, <span class="at">side =</span> <span class="st">"left"</span>, <span class="at">pad =</span> <span class="st">"0"</span>),</span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">CPRO =</span> <span class="fu">str_pad</span>(CPRO, <span class="at">width =</span> <span class="dv">2</span>, <span class="at">side =</span> <span class="st">"left"</span>, <span class="at">pad =</span> <span class="st">"0"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(  </span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">CPRO =</span> <span class="fu">trimws</span>(CPRO), <span class="co">#Esto para que no quede espacio tras usar paste</span></span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">CMUN =</span> <span class="fu">trimws</span>(CMUN),</span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">cusec =</span> <span class="fu">paste0</span>(CPRO, CMUN)) <span class="sc">|&gt;</span> </span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a>   <span class="fu">filter</span>(JOVEN <span class="sc">==</span> <span class="st">"Joven"</span>)</span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb9-40"><a href="#cb9-40" aria-hidden="true" tabindex="-1"></a><span class="co"># Se añaden las CCAA </span></span>
<span id="cb9-41"><a href="#cb9-41" aria-hidden="true" tabindex="-1"></a>jovenes11 <span class="ot">&lt;-</span> jovenes11 <span class="sc">|&gt;</span> </span>
<span id="cb9-42"><a href="#cb9-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(ccaas, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"CPRO"</span> <span class="ot">=</span> <span class="st">"CodigoProvincia"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in left_join(jovenes11, ccaas, by = c(CPRO = "CodigoProvincia")): Detected an unexpected many-to-many relationship between `x` and `y`.
ℹ Row 596776 of `x` matches multiple rows in `y`.
ℹ Row 1 of `y` matches multiple rows in `x`.
ℹ If a many-to-many relationship is expected, set `relationship =
  "many-to-many"` to silence this warning.</code></pre>
</div>
</div>
</section>
<section id="probabilidad-compraalquilerotros-de-jóvenes-en-2011" class="level2">
<h2 class="anchored" data-anchor-id="probabilidad-compraalquilerotros-de-jóvenes-en-2011">Probabilidad compra/alquiler/otros de jóvenes en 2011</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Por municipio</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>jovenes11 <span class="ot">&lt;-</span> jovenes11 <span class="sc">|&gt;</span> </span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(cusec) <span class="sc">|&gt;</span> </span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">Propiedad11Mun =</span> <span class="fu">round</span>((<span class="fu">sum</span>(TENEN_VIV <span class="sc">==</span> <span class="st">"Propiedad"</span>) <span class="sc">/</span> <span class="fu">n</span>()) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>),</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">Alquiler11Mun =</span> <span class="fu">round</span>((<span class="fu">sum</span>(TENEN_VIV <span class="sc">==</span> <span class="st">"Alquiler"</span>) <span class="sc">/</span> <span class="fu">n</span>()) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>),</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">Otro11Mun =</span> <span class="fu">round</span>((<span class="fu">sum</span>(TENEN_VIV <span class="sc">==</span> <span class="st">"Otro"</span>) <span class="sc">/</span> <span class="fu">n</span>()) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>))</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Por provincia</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>jovenes11 <span class="ot">&lt;-</span> jovenes11 <span class="sc">|&gt;</span> </span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(CPRO) <span class="sc">|&gt;</span> </span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">Propiedad11Prov =</span> <span class="fu">round</span>((<span class="fu">sum</span>(TENEN_VIV <span class="sc">==</span> <span class="st">"Propiedad"</span>) <span class="sc">/</span> <span class="fu">n</span>()) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>),</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">Alquiler11Prov =</span> <span class="fu">round</span>((<span class="fu">sum</span>(TENEN_VIV <span class="sc">==</span> <span class="st">"Alquiler"</span>) <span class="sc">/</span> <span class="fu">n</span>()) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>),</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">Otro11Prov =</span> <span class="fu">round</span>((<span class="fu">sum</span>(TENEN_VIV <span class="sc">==</span> <span class="st">"Otro"</span>) <span class="sc">/</span> <span class="fu">n</span>()) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>))</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Por CCAA</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>jovenes11 <span class="ot">&lt;-</span> jovenes11 <span class="sc">|&gt;</span> </span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(CCAA) <span class="sc">|&gt;</span> </span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">Propiedad11CCAA =</span> <span class="fu">round</span>((<span class="fu">sum</span>(TENEN_VIV <span class="sc">==</span> <span class="st">"Propiedad"</span>) <span class="sc">/</span> <span class="fu">n</span>()) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>),</span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">Alquiler11CCAA =</span> <span class="fu">round</span>((<span class="fu">sum</span>(TENEN_VIV <span class="sc">==</span> <span class="st">"Alquiler"</span>) <span class="sc">/</span> <span class="fu">n</span>()) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>),</span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">Otro11CCAA =</span> <span class="fu">round</span>((<span class="fu">sum</span>(TENEN_VIV <span class="sc">==</span> <span class="st">"Otro"</span>) <span class="sc">/</span> <span class="fu">n</span>()) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="nombres-lugares" class="level2">
<h2 class="anchored" data-anchor-id="nombres-lugares">Nombres lugares</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Importar base de datos de vivienda turística porque incluye estos nombres</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Hay que poner eso de NA porque sino sale un warning muy largo</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>locations <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"vivienda turística/exp_viv_turistica_tabla5_FEB2021.xlsx"</span>, <span class="at">sheet =</span> <span class="dv">3</span>, <span class="at">na =</span> <span class="st">"Dato protegido por secreto estadístico."</span>)</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>nombres_municipios <span class="ot">&lt;-</span> locations <span class="sc">|&gt;</span> </span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(MUN_LITERAL, MUN) <span class="sc">|&gt;</span> </span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">cusec =</span> MUN) <span class="sc">|&gt;</span> </span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(cusec, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>nombres_provincias <span class="ot">&lt;-</span> locations <span class="sc">|&gt;</span> </span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(PROV_LITERAL, PROV) <span class="sc">|&gt;</span> </span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">CPRO =</span> PROV) <span class="sc">|&gt;</span> </span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(CPRO, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="unir-ambas-tablas-con-todas-las-columnas-interesantes" class="level2">
<h2 class="anchored" data-anchor-id="unir-ambas-tablas-con-todas-las-columnas-interesantes">Unir ambas tablas con todas las columnas interesantes</h2>
<p>Una sola row por cada municipio (cusec). En 2011 ‘censura’ el código de identificación de los municipios de 10000 a 20000 habitantes, mientras que en 2021 sólo de los menores de 10000. Al juntar ambas datasets ‘se pierde’ la identificación de esos municipios de 10 a 20 mil. Pero son muy pocos y no creo que sea muy relevante; de todas formas se podría discernir cuáles son porque también aparece de qué provincia son.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Añadir nombres municipios y provincias</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>jovenes_total <span class="ot">&lt;-</span> jovenes <span class="sc">|&gt;</span> </span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(nombres_municipios, <span class="at">by =</span> <span class="st">"cusec"</span>, <span class="st">"cusec"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(nombres_provincias, <span class="at">by =</span> <span class="st">"CPRO"</span>, <span class="st">"CPRO"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(cusec, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Añadir datos 2011</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Tiene menos municipios (porque los de 10k a 20k no los especifica)</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>jovenes_total <span class="ot">&lt;-</span> jovenes11 <span class="sc">|&gt;</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(cusec, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(cusec, CCAA, Propiedad11Mun, Alquiler11Mun, Otro11Mun, Propiedad11Prov, Alquiler11Prov, Otro11Prov, Propiedad11CCAA, Alquiler11CCAA, Otro11CCAA) <span class="sc">|&gt;</span> </span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(jovenes_total, <span class="at">by =</span> <span class="st">"cusec"</span>, <span class="st">"cusec"</span>)</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a><span class="co">#Ordenar</span></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Al juntarlos se eliminan los municipios que sí salen en 2021</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>jovenes_total <span class="ot">&lt;-</span> jovenes_total <span class="sc">|&gt;</span> </span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(cusec, CCAA.x, CPRO, PROV_LITERAL, CMUN, MUN_LITERAL, HABITAT, Propiedad21Mun, Alquiler21Mun, Otro21Mun, Propiedad11Mun, Alquiler11Mun, Otro11Mun, Propiedad21Prov, Alquiler21Prov, Otro21Prov, Propiedad11Prov, Alquiler11Prov, Otro11Prov, Propiedad21CCAA, Alquiler21CCAA, Otro21CCAA, Propiedad11CCAA, Alquiler11CCAA, Otro11CCAA) <span class="sc">|&gt;</span> </span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_sub</span>(cusec, <span class="sc">-</span><span class="dv">3</span>) <span class="sc">!=</span> <span class="st">"994"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="diferencia-2011-y-2021" class="level2">
<h2 class="anchored" data-anchor-id="diferencia-2011-y-2021">Diferencia 2011 y 2021</h2>
<section id="por-municipio" class="level3">
<h3 class="anchored" data-anchor-id="por-municipio">Por municipio</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Propiedad</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>jovenes_total <span class="ot">&lt;-</span> jovenes_total <span class="sc">|&gt;</span> </span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">PropiedadDifMun =</span> Propiedad21Mun <span class="sc">-</span> Propiedad11Mun)</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Alquiler</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>jovenes_total <span class="ot">&lt;-</span> jovenes_total <span class="sc">|&gt;</span> </span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">AlquilerDifMun =</span> Alquiler21Mun <span class="sc">-</span> Alquiler11Mun)</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Otro</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>jovenes_total <span class="ot">&lt;-</span> jovenes_total <span class="sc">|&gt;</span> </span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">OtroDifProv =</span> Otro21Mun <span class="sc">-</span> Otro11Mun)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="por-provincia" class="level3">
<h3 class="anchored" data-anchor-id="por-provincia">Por provincia</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Propiedad</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>jovenes_total <span class="ot">&lt;-</span> jovenes_total <span class="sc">|&gt;</span> </span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">PropiedadDifProv =</span> Propiedad21Prov <span class="sc">-</span> Propiedad11Prov)</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Alquiler</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>jovenes_total <span class="ot">&lt;-</span> jovenes_total <span class="sc">|&gt;</span> </span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">AlquilerDifProv =</span> Alquiler21Prov <span class="sc">-</span> Alquiler11Prov)</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Otro</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>jovenes_total <span class="ot">&lt;-</span> jovenes_total <span class="sc">|&gt;</span> </span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">OtroDifProv =</span> Otro21Prov <span class="sc">-</span> Otro11Prov)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="mapas" class="level2">
<h2 class="anchored" data-anchor-id="mapas">Mapas</h2>
<section id="mapa-por-mun" class="level3">
<h3 class="anchored" data-anchor-id="mapa-por-mun">Mapa por mun</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mapSpain)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>esp_can <span class="ot">&lt;-</span> <span class="fu">esp_get_country</span>() </span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>can_prov <span class="ot">&lt;-</span> <span class="fu">esp_get_can_provinces</span>()</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>can_box <span class="ot">&lt;-</span> <span class="fu">esp_get_can_box</span>() </span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>munic <span class="ot">&lt;-</span> <span class="fu">esp_get_munic</span>() </span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>munic <span class="ot">&lt;-</span>    </span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>  munic <span class="sc">|&gt;</span>  </span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cusec =</span> cmun) <span class="sc">|&gt;</span> </span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(geometry, cusec)</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Mapa por municipios</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a><span class="co"># PROPIEDAD</span></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>mapa <span class="ot">&lt;-</span> jovenes_total <span class="sc">|&gt;</span> </span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(CCAA.x, cusec, Propiedad21Mun)</span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>mapa <span class="ot">&lt;-</span> munic <span class="sc">|&gt;</span> </span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(mapa, <span class="at">by =</span> <span class="st">"cusec"</span>)</span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>mapa_mun <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(esp_can) <span class="sc">+</span></span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>() <span class="sc">+</span></span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> can_prov) <span class="sc">+</span></span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> can_box) <span class="sc">+</span> </span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> mapa, <span class="fu">aes</span>(<span class="at">fill =</span> Propiedad21Mun), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span>  </span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Probabilidad de compra por municipio"</span>) <span class="sc">+</span>  </span>
<span id="cb16-30"><a href="#cb16-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="fu">c</span>(<span class="fl">0.18</span>, <span class="fl">0.55</span>),    </span>
<span id="cb16-31"><a href="#cb16-31" aria-hidden="true" tabindex="-1"></a>          <span class="at">legend.justification =</span> <span class="st">"center"</span>,   </span>
<span id="cb16-32"><a href="#cb16-32" aria-hidden="true" tabindex="-1"></a>          <span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="cn">NULL</span>, <span class="at">colour =</span> <span class="st">"black"</span>),</span>
<span id="cb16-33"><a href="#cb16-33" aria-hidden="true" tabindex="-1"></a>          <span class="at">legend.margin =</span> <span class="fu">margin</span>(<span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">6</span>))<span class="sc">+</span> </span>
<span id="cb16-34"><a href="#cb16-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">ncol =</span> <span class="dv">2</span>)) <span class="sc">+</span> </span>
<span id="cb16-35"><a href="#cb16-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_sf</span>()</span>
<span id="cb16-36"><a href="#cb16-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-37"><a href="#cb16-37" aria-hidden="true" tabindex="-1"></a>mapa_mun</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Jovenes_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co">#ALQUILER</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>mapa <span class="ot">&lt;-</span> jovenes_total <span class="sc">|&gt;</span> </span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(CCAA.x, cusec, Alquiler21Mun)</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>mapa <span class="ot">&lt;-</span> munic <span class="sc">|&gt;</span> </span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(mapa, <span class="at">by =</span> <span class="st">"cusec"</span>)</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>mapa_mun <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(esp_can) <span class="sc">+</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>() <span class="sc">+</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> can_prov) <span class="sc">+</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> can_box) <span class="sc">+</span> </span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> mapa, <span class="fu">aes</span>(<span class="at">fill =</span> Alquiler21Mun), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span>  </span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Probabilidad de alquiler por provincia"</span>) <span class="sc">+</span>  </span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="fu">c</span>(<span class="fl">0.18</span>, <span class="fl">0.55</span>),    </span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.justification =</span> <span class="st">"center"</span>,   </span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="cn">NULL</span>, <span class="at">colour =</span> <span class="st">"black"</span>),</span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.margin =</span> <span class="fu">margin</span>(<span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">6</span>))<span class="sc">+</span> </span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">ncol =</span> <span class="dv">2</span>)) <span class="sc">+</span> </span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>()</span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>mapa_mun</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Jovenes_files/figure-html/unnamed-chunk-12-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="mapa-por-provincias" class="level3">
<h3 class="anchored" data-anchor-id="mapa-por-provincias">Mapa por provincias</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Propiedad 2021</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>provic <span class="ot">&lt;-</span> <span class="fu">esp_get_prov</span>() <span class="sc">|&gt;</span> </span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">CPRO =</span> cpro)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>mapa <span class="ot">&lt;-</span> jovenes_total <span class="sc">|&gt;</span> </span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(CPRO, Propiedad21Prov)</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>mapa <span class="ot">&lt;-</span> provic <span class="sc">|&gt;</span> </span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(mapa, <span class="at">by =</span> <span class="st">"CPRO"</span>)</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>mapa_prop_prov21 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(esp_can) <span class="sc">+</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>() <span class="sc">+</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> can_prov) <span class="sc">+</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> can_box) <span class="sc">+</span> </span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> mapa, <span class="fu">aes</span>(<span class="at">fill =</span> Propiedad21Prov), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_sf_text</span>(<span class="at">data =</span> mapa, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">round</span>(Propiedad21Prov, <span class="dv">1</span>)), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="fl">2.5</span>, <span class="at">check_overlap =</span> <span class="cn">TRUE</span>, <span class="at">nudge_y =</span> <span class="fl">0.1</span>) <span class="sc">+</span>  <span class="co"># Agregar etiquetas</span></span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span>  </span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Probabilidad de propiedad por provincia 2021"</span>) <span class="sc">+</span>  </span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="fu">c</span>(<span class="fl">0.18</span>, <span class="fl">0.55</span>),    </span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.justification =</span> <span class="st">"center"</span>,   </span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="cn">NULL</span>, <span class="at">colour =</span> <span class="st">"black"</span>),</span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.margin =</span> <span class="fu">margin</span>(<span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">6</span>)) <span class="sc">+</span> </span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">ncol =</span> <span class="dv">2</span>)) <span class="sc">+</span> </span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>() <span class="sc">+</span></span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>(<span class="at">option =</span> <span class="st">"C"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">55</span>, <span class="dv">85</span>))</span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-27"><a href="#cb18-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-28"><a href="#cb18-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Propiedad 2011</span></span>
<span id="cb18-29"><a href="#cb18-29" aria-hidden="true" tabindex="-1"></a>provic <span class="ot">&lt;-</span> <span class="fu">esp_get_prov</span>() <span class="sc">|&gt;</span> </span>
<span id="cb18-30"><a href="#cb18-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">CPRO =</span> cpro)</span>
<span id="cb18-31"><a href="#cb18-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-32"><a href="#cb18-32" aria-hidden="true" tabindex="-1"></a>mapa <span class="ot">&lt;-</span> jovenes_total <span class="sc">|&gt;</span> </span>
<span id="cb18-33"><a href="#cb18-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(CPRO, Propiedad11Prov)</span>
<span id="cb18-34"><a href="#cb18-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-35"><a href="#cb18-35" aria-hidden="true" tabindex="-1"></a>mapa <span class="ot">&lt;-</span> provic <span class="sc">|&gt;</span> </span>
<span id="cb18-36"><a href="#cb18-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(mapa, <span class="at">by =</span> <span class="st">"CPRO"</span>)</span>
<span id="cb18-37"><a href="#cb18-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-38"><a href="#cb18-38" aria-hidden="true" tabindex="-1"></a>mapa_prop_prov11 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(esp_can) <span class="sc">+</span></span>
<span id="cb18-39"><a href="#cb18-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>() <span class="sc">+</span></span>
<span id="cb18-40"><a href="#cb18-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> can_prov) <span class="sc">+</span></span>
<span id="cb18-41"><a href="#cb18-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> can_box) <span class="sc">+</span> </span>
<span id="cb18-42"><a href="#cb18-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> mapa, <span class="fu">aes</span>(<span class="at">fill =</span> Propiedad11Prov), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb18-43"><a href="#cb18-43" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_sf_text</span>(<span class="at">data =</span> mapa, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">round</span>(Propiedad11Prov, <span class="dv">1</span>)), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="fl">2.5</span>, <span class="at">check_overlap =</span> <span class="cn">TRUE</span>, <span class="at">nudge_y =</span> <span class="fl">0.1</span>) <span class="sc">+</span>  <span class="co"># Agregar etiquetas</span></span>
<span id="cb18-44"><a href="#cb18-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-45"><a href="#cb18-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span>  </span>
<span id="cb18-46"><a href="#cb18-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Probabilidad de propiedad por provincia 2011"</span>) <span class="sc">+</span>  </span>
<span id="cb18-47"><a href="#cb18-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="fu">c</span>(<span class="fl">0.18</span>, <span class="fl">0.55</span>),    </span>
<span id="cb18-48"><a href="#cb18-48" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.justification =</span> <span class="st">"center"</span>,   </span>
<span id="cb18-49"><a href="#cb18-49" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="cn">NULL</span>, <span class="at">colour =</span> <span class="st">"black"</span>),</span>
<span id="cb18-50"><a href="#cb18-50" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.margin =</span> <span class="fu">margin</span>(<span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">6</span>)) <span class="sc">+</span> </span>
<span id="cb18-51"><a href="#cb18-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">ncol =</span> <span class="dv">2</span>)) <span class="sc">+</span> </span>
<span id="cb18-52"><a href="#cb18-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>() <span class="sc">+</span></span>
<span id="cb18-53"><a href="#cb18-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>(<span class="at">option =</span> <span class="st">"C"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">55</span>, <span class="dv">85</span>))</span>
<span id="cb18-54"><a href="#cb18-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-55"><a href="#cb18-55" aria-hidden="true" tabindex="-1"></a><span class="co"># Alquiler</span></span>
<span id="cb18-56"><a href="#cb18-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-57"><a href="#cb18-57" aria-hidden="true" tabindex="-1"></a>provic <span class="ot">&lt;-</span> <span class="fu">esp_get_prov</span>() <span class="sc">|&gt;</span> </span>
<span id="cb18-58"><a href="#cb18-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">CPRO =</span> cpro)</span>
<span id="cb18-59"><a href="#cb18-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-60"><a href="#cb18-60" aria-hidden="true" tabindex="-1"></a>mapa <span class="ot">&lt;-</span> jovenes_total <span class="sc">|&gt;</span> </span>
<span id="cb18-61"><a href="#cb18-61" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(CPRO, Alquiler21Prov)</span>
<span id="cb18-62"><a href="#cb18-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-63"><a href="#cb18-63" aria-hidden="true" tabindex="-1"></a>mapa <span class="ot">&lt;-</span> provic <span class="sc">|&gt;</span> </span>
<span id="cb18-64"><a href="#cb18-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(mapa, <span class="at">by =</span> <span class="st">"CPRO"</span>)</span>
<span id="cb18-65"><a href="#cb18-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-66"><a href="#cb18-66" aria-hidden="true" tabindex="-1"></a>mapa_alq_prov21 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(esp_can) <span class="sc">+</span></span>
<span id="cb18-67"><a href="#cb18-67" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>() <span class="sc">+</span></span>
<span id="cb18-68"><a href="#cb18-68" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> can_prov) <span class="sc">+</span></span>
<span id="cb18-69"><a href="#cb18-69" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> can_box) <span class="sc">+</span> </span>
<span id="cb18-70"><a href="#cb18-70" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> mapa, <span class="fu">aes</span>(<span class="at">fill =</span> Alquiler21Prov), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb18-71"><a href="#cb18-71" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_sf_text</span>(<span class="at">data =</span> mapa, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">round</span>(Alquiler21Prov, <span class="dv">1</span>)), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="fl">2.5</span>, <span class="at">check_overlap =</span> <span class="cn">TRUE</span>, <span class="at">nudge_y =</span> <span class="fl">0.1</span>) <span class="sc">+</span>  <span class="co"># Agregar etiquetas</span></span>
<span id="cb18-72"><a href="#cb18-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-73"><a href="#cb18-73" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span>  </span>
<span id="cb18-74"><a href="#cb18-74" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Probabilidad de alquiler por provincia"</span>) <span class="sc">+</span>  </span>
<span id="cb18-75"><a href="#cb18-75" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="fu">c</span>(<span class="fl">0.18</span>, <span class="fl">0.55</span>),    </span>
<span id="cb18-76"><a href="#cb18-76" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.justification =</span> <span class="st">"center"</span>,   </span>
<span id="cb18-77"><a href="#cb18-77" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="cn">NULL</span>, <span class="at">colour =</span> <span class="st">"black"</span>),</span>
<span id="cb18-78"><a href="#cb18-78" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.margin =</span> <span class="fu">margin</span>(<span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">6</span>)) <span class="sc">+</span> </span>
<span id="cb18-79"><a href="#cb18-79" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">ncol =</span> <span class="dv">2</span>)) <span class="sc">+</span> </span>
<span id="cb18-80"><a href="#cb18-80" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>() <span class="sc">+</span></span>
<span id="cb18-81"><a href="#cb18-81" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>(<span class="at">option =</span> <span class="st">"C"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">34</span>))</span>
<span id="cb18-82"><a href="#cb18-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-83"><a href="#cb18-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-84"><a href="#cb18-84" aria-hidden="true" tabindex="-1"></a><span class="co"># Alquiler 2011</span></span>
<span id="cb18-85"><a href="#cb18-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-86"><a href="#cb18-86" aria-hidden="true" tabindex="-1"></a>provic <span class="ot">&lt;-</span> <span class="fu">esp_get_prov</span>() <span class="sc">|&gt;</span> </span>
<span id="cb18-87"><a href="#cb18-87" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">CPRO =</span> cpro)</span>
<span id="cb18-88"><a href="#cb18-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-89"><a href="#cb18-89" aria-hidden="true" tabindex="-1"></a>mapa <span class="ot">&lt;-</span> jovenes_total <span class="sc">|&gt;</span> </span>
<span id="cb18-90"><a href="#cb18-90" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(CPRO, Alquiler11Prov)</span>
<span id="cb18-91"><a href="#cb18-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-92"><a href="#cb18-92" aria-hidden="true" tabindex="-1"></a>mapa <span class="ot">&lt;-</span> provic <span class="sc">|&gt;</span> </span>
<span id="cb18-93"><a href="#cb18-93" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(mapa, <span class="at">by =</span> <span class="st">"CPRO"</span>)</span>
<span id="cb18-94"><a href="#cb18-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-95"><a href="#cb18-95" aria-hidden="true" tabindex="-1"></a>mapa_alq_prov11 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(esp_can) <span class="sc">+</span></span>
<span id="cb18-96"><a href="#cb18-96" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>() <span class="sc">+</span></span>
<span id="cb18-97"><a href="#cb18-97" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> can_prov) <span class="sc">+</span></span>
<span id="cb18-98"><a href="#cb18-98" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> can_box) <span class="sc">+</span> </span>
<span id="cb18-99"><a href="#cb18-99" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> mapa, <span class="fu">aes</span>(<span class="at">fill =</span> Alquiler11Prov), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb18-100"><a href="#cb18-100" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf_text</span>(<span class="at">data =</span> mapa, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">round</span>(Alquiler11Prov, <span class="dv">1</span>)), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="fl">2.5</span>, <span class="at">check_overlap =</span> <span class="cn">TRUE</span>, <span class="at">nudge_y =</span> <span class="fl">0.1</span>) <span class="sc">+</span>  <span class="co"># Agregar etiquetas</span></span>
<span id="cb18-101"><a href="#cb18-101" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span>  </span>
<span id="cb18-102"><a href="#cb18-102" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Probabilidad de alquiler por provincia 2011"</span>) <span class="sc">+</span>  </span>
<span id="cb18-103"><a href="#cb18-103" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="fu">c</span>(<span class="fl">0.18</span>, <span class="fl">0.55</span>),    </span>
<span id="cb18-104"><a href="#cb18-104" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.justification =</span> <span class="st">"center"</span>,   </span>
<span id="cb18-105"><a href="#cb18-105" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="cn">NULL</span>, <span class="at">colour =</span> <span class="st">"black"</span>),</span>
<span id="cb18-106"><a href="#cb18-106" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.margin =</span> <span class="fu">margin</span>(<span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">6</span>)) <span class="sc">+</span> </span>
<span id="cb18-107"><a href="#cb18-107" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">ncol =</span> <span class="dv">2</span>)) <span class="sc">+</span> </span>
<span id="cb18-108"><a href="#cb18-108" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>() <span class="sc">+</span></span>
<span id="cb18-109"><a href="#cb18-109" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>(<span class="at">option =</span> <span class="st">"C"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">34</span>))</span>
<span id="cb18-110"><a href="#cb18-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-111"><a href="#cb18-111" aria-hidden="true" tabindex="-1"></a><span class="fu">ggarrange</span>(mapa_prop_prov21, mapa_prop_prov11, mapa_alq_prov21, mapa_alq_prov11,</span>
<span id="cb18-112"><a href="#cb18-112" aria-hidden="true" tabindex="-1"></a>          <span class="at">nrow=</span><span class="dv">2</span>, <span class="at">ncol=</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in st_point_on_surface.sfc(sf::st_zm(x)): st_point_on_surface may not
give correct results for longitude/latitude data

Warning in st_point_on_surface.sfc(sf::st_zm(x)): st_point_on_surface may not
give correct results for longitude/latitude data

Warning in st_point_on_surface.sfc(sf::st_zm(x)): st_point_on_surface may not
give correct results for longitude/latitude data

Warning in st_point_on_surface.sfc(sf::st_zm(x)): st_point_on_surface may not
give correct results for longitude/latitude data</code></pre>
</div>
<div class="cell-output-display">
<p><img src="Jovenes_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
</section>
<section id="variación-por-provincia-de-2011-a-2021" class="level3">
<h3 class="anchored" data-anchor-id="variación-por-provincia-de-2011-a-2021">Variación por provincia de 2011 a 2021</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Mapa por provincias PROPIEDAD</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>provic <span class="ot">&lt;-</span> <span class="fu">esp_get_prov</span>() <span class="sc">|&gt;</span> </span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">CPRO =</span> cpro)</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>mapa <span class="ot">&lt;-</span> jovenes_total <span class="sc">|&gt;</span> </span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(CPRO, PropiedadDifProv)</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>mapa <span class="ot">&lt;-</span> provic <span class="sc">|&gt;</span> </span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(mapa, <span class="at">by =</span> <span class="st">"CPRO"</span>)</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>mapa_propiedad_prov <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(esp_can) <span class="sc">+</span></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>() <span class="sc">+</span></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> can_prov) <span class="sc">+</span></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> can_box) <span class="sc">+</span> </span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> mapa, <span class="fu">aes</span>(<span class="at">fill =</span> PropiedadDifProv), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf_text</span>(<span class="at">data =</span> mapa, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">round</span>(PropiedadDifProv, <span class="dv">1</span>)), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="dv">3</span>, <span class="at">check_overlap =</span> <span class="cn">TRUE</span>, <span class="at">nudge_y =</span> <span class="fl">0.1</span>) <span class="sc">+</span>  <span class="co"># Agregar etiquetas</span></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span>  </span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Probabilidad de compra por provincia"</span>) <span class="sc">+</span>  </span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="fu">c</span>(<span class="fl">0.18</span>, <span class="fl">0.55</span>),    </span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.justification =</span> <span class="st">"center"</span>,   </span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="cn">NULL</span>, <span class="at">colour =</span> <span class="st">"black"</span>),</span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.margin =</span> <span class="fu">margin</span>(<span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">6</span>))<span class="sc">+</span> </span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">ncol =</span> <span class="dv">2</span>)) <span class="sc">+</span> </span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>() <span class="sc">+</span></span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient2</span>(<span class="at">low =</span> <span class="st">"red"</span>, <span class="at">mid =</span> <span class="st">"white"</span>, <span class="at">high =</span> <span class="st">"green"</span>, <span class="at">midpoint =</span> <span class="dv">0</span>, <span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">16</span>, <span class="dv">5</span>))</span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true" tabindex="-1"></a><span class="co"># ALQUILER</span></span>
<span id="cb20-29"><a href="#cb20-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-30"><a href="#cb20-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-31"><a href="#cb20-31" aria-hidden="true" tabindex="-1"></a>provic <span class="ot">&lt;-</span> <span class="fu">esp_get_prov</span>() <span class="sc">|&gt;</span> </span>
<span id="cb20-32"><a href="#cb20-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">CPRO =</span> cpro)</span>
<span id="cb20-33"><a href="#cb20-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-34"><a href="#cb20-34" aria-hidden="true" tabindex="-1"></a>mapa <span class="ot">&lt;-</span> jovenes_total <span class="sc">|&gt;</span> </span>
<span id="cb20-35"><a href="#cb20-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(CPRO, AlquilerDifProv)</span>
<span id="cb20-36"><a href="#cb20-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-37"><a href="#cb20-37" aria-hidden="true" tabindex="-1"></a>mapa <span class="ot">&lt;-</span> provic <span class="sc">|&gt;</span> </span>
<span id="cb20-38"><a href="#cb20-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(mapa, <span class="at">by =</span> <span class="st">"CPRO"</span>)</span>
<span id="cb20-39"><a href="#cb20-39" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-40"><a href="#cb20-40" aria-hidden="true" tabindex="-1"></a>mapa_alquiler_prov <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(esp_can) <span class="sc">+</span></span>
<span id="cb20-41"><a href="#cb20-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>() <span class="sc">+</span></span>
<span id="cb20-42"><a href="#cb20-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> can_prov) <span class="sc">+</span></span>
<span id="cb20-43"><a href="#cb20-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> can_box) <span class="sc">+</span> </span>
<span id="cb20-44"><a href="#cb20-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> mapa, <span class="fu">aes</span>(<span class="at">fill =</span> AlquilerDifProv), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb20-45"><a href="#cb20-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf_text</span>(<span class="at">data =</span> mapa, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">round</span>(AlquilerDifProv, <span class="dv">1</span>)), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="dv">3</span>, <span class="at">check_overlap =</span> <span class="cn">TRUE</span>, <span class="at">nudge_y =</span> <span class="fl">0.1</span>) <span class="sc">+</span>  <span class="co"># Agregar etiquetas</span></span>
<span id="cb20-46"><a href="#cb20-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span>  </span>
<span id="cb20-47"><a href="#cb20-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Probabilidad de alquiler por provincia"</span>) <span class="sc">+</span>  </span>
<span id="cb20-48"><a href="#cb20-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="fu">c</span>(<span class="fl">0.18</span>, <span class="fl">0.55</span>),    </span>
<span id="cb20-49"><a href="#cb20-49" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.justification =</span> <span class="st">"center"</span>,   </span>
<span id="cb20-50"><a href="#cb20-50" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="cn">NULL</span>, <span class="at">colour =</span> <span class="st">"black"</span>),</span>
<span id="cb20-51"><a href="#cb20-51" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.margin =</span> <span class="fu">margin</span>(<span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">6</span>)) <span class="sc">+</span> </span>
<span id="cb20-52"><a href="#cb20-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">ncol =</span> <span class="dv">2</span>)) <span class="sc">+</span> </span>
<span id="cb20-53"><a href="#cb20-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>() <span class="sc">+</span></span>
<span id="cb20-54"><a href="#cb20-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient2</span>(<span class="at">low =</span> <span class="st">"red"</span>, <span class="at">mid =</span> <span class="st">"white"</span>, <span class="at">high =</span> <span class="st">"green"</span>, <span class="at">midpoint =</span> <span class="dv">0</span>, <span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">2</span>, <span class="dv">17</span>))</span>
<span id="cb20-55"><a href="#cb20-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-56"><a href="#cb20-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-57"><a href="#cb20-57" aria-hidden="true" tabindex="-1"></a><span class="co"># OTRO</span></span>
<span id="cb20-58"><a href="#cb20-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-59"><a href="#cb20-59" aria-hidden="true" tabindex="-1"></a>provic <span class="ot">&lt;-</span> <span class="fu">esp_get_prov</span>() <span class="sc">|&gt;</span> </span>
<span id="cb20-60"><a href="#cb20-60" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">CPRO =</span> cpro)</span>
<span id="cb20-61"><a href="#cb20-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-62"><a href="#cb20-62" aria-hidden="true" tabindex="-1"></a>mapa <span class="ot">&lt;-</span> jovenes_total <span class="sc">|&gt;</span> </span>
<span id="cb20-63"><a href="#cb20-63" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(CPRO, OtroDifProv)</span>
<span id="cb20-64"><a href="#cb20-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-65"><a href="#cb20-65" aria-hidden="true" tabindex="-1"></a>mapa <span class="ot">&lt;-</span> provic <span class="sc">|&gt;</span> </span>
<span id="cb20-66"><a href="#cb20-66" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(mapa, <span class="at">by =</span> <span class="st">"CPRO"</span>)</span>
<span id="cb20-67"><a href="#cb20-67" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-68"><a href="#cb20-68" aria-hidden="true" tabindex="-1"></a>mapa_otro_prov <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(esp_can) <span class="sc">+</span></span>
<span id="cb20-69"><a href="#cb20-69" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>() <span class="sc">+</span></span>
<span id="cb20-70"><a href="#cb20-70" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> can_prov) <span class="sc">+</span></span>
<span id="cb20-71"><a href="#cb20-71" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> can_box) <span class="sc">+</span> </span>
<span id="cb20-72"><a href="#cb20-72" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> mapa, <span class="fu">aes</span>(<span class="at">fill =</span> OtroDifProv), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb20-73"><a href="#cb20-73" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf_text</span>(<span class="at">data =</span> mapa, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">round</span>(OtroDifProv, <span class="dv">1</span>)), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="dv">3</span>, <span class="at">check_overlap =</span> <span class="cn">TRUE</span>, <span class="at">nudge_y =</span> <span class="fl">0.1</span>) <span class="sc">+</span>  <span class="co"># Agregar etiquetas</span></span>
<span id="cb20-74"><a href="#cb20-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-75"><a href="#cb20-75" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span>  </span>
<span id="cb20-76"><a href="#cb20-76" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Probabilidad de otro por provincia"</span>) <span class="sc">+</span>  </span>
<span id="cb20-77"><a href="#cb20-77" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="fu">c</span>(<span class="fl">0.18</span>, <span class="fl">0.55</span>),    </span>
<span id="cb20-78"><a href="#cb20-78" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.justification =</span> <span class="st">"center"</span>,   </span>
<span id="cb20-79"><a href="#cb20-79" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="cn">NULL</span>, <span class="at">colour =</span> <span class="st">"black"</span>),</span>
<span id="cb20-80"><a href="#cb20-80" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.margin =</span> <span class="fu">margin</span>(<span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">6</span>))<span class="sc">+</span> </span>
<span id="cb20-81"><a href="#cb20-81" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">ncol =</span> <span class="dv">2</span>)) <span class="sc">+</span> </span>
<span id="cb20-82"><a href="#cb20-82" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>() <span class="sc">+</span></span>
<span id="cb20-83"><a href="#cb20-83" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient2</span>(<span class="at">low =</span> <span class="st">"red"</span>, <span class="at">mid =</span> <span class="st">"white"</span>, <span class="at">high =</span> <span class="st">"green"</span>, <span class="at">midpoint =</span> <span class="dv">0</span>, <span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">5</span>, <span class="dv">5</span>))</span>
<span id="cb20-84"><a href="#cb20-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-85"><a href="#cb20-85" aria-hidden="true" tabindex="-1"></a><span class="fu">ggarrange</span>(mapa_propiedad_prov, mapa_alquiler_prov, mapa_otro_prov,</span>
<span id="cb20-86"><a href="#cb20-86" aria-hidden="true" tabindex="-1"></a>          <span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">nrow =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in st_point_on_surface.sfc(sf::st_zm(x)): st_point_on_surface may not
give correct results for longitude/latitude data

Warning in st_point_on_surface.sfc(sf::st_zm(x)): st_point_on_surface may not
give correct results for longitude/latitude data

Warning in st_point_on_surface.sfc(sf::st_zm(x)): st_point_on_surface may not
give correct results for longitude/latitude data</code></pre>
</div>
<div class="cell-output-display">
<p><img src="Jovenes_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
</section>
</section>
<section id="ver-top-ccaa-con-mas-propiedad-y-alquiler-en-2021-y-2011" class="level2">
<h2 class="anchored" data-anchor-id="ver-top-ccaa-con-mas-propiedad-y-alquiler-en-2021-y-2011">Ver top CCAA con mas propiedad y alquiler en 2021 y 2011</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Top CCAA con más propiedad en 2021</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>top_propiedad_2021 <span class="ot">&lt;-</span> jovenes_total <span class="sc">%&gt;%</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Propiedad21CCAA)) <span class="sc">%&gt;%</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(Propiedad21CCAA, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Propiedad21CCAA, CCAA.x)</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>top_propiedad_2021</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 19 × 2
   Propiedad21CCAA CCAA.x                    
             &lt;dbl&gt; &lt;chr&gt;                     
 1            77.3 Andalucía                 
 2            76.4 Extremadura               
 3            76.2 Castilla-La Mancha        
 4            75.1 Castilla y León           
 5            74.7 Comunidad de Murcia       
 6            74.2 La Rioja                  
 7            73.8 Comunidad Valenciana      
 8            72.4 Ceuta                     
 9            72.3 Comunidad Foral de Navarra
10            71.6 País Vasco                
11            71.6 Cantabria                 
12            70.6 Galicia                   
13            69.3 Asturias                  
14            69.1 Aragón                    
15            65.1 Comunidad de Madrid       
16            62.9 Canarias                  
17            61.7 Islas Baleares            
18            60.6 Melilla                   
19            60.1 Cataluña                  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Top CCAA con más alquiler en 2021</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>top_alquiler_2021 <span class="ot">&lt;-</span> jovenes_total <span class="sc">%&gt;%</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Alquiler21CCAA)) <span class="sc">%&gt;%</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">distinct</span>(Alquiler21CCAA, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(Alquiler21CCAA, CCAA.x)</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>top_alquiler_2021</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 19 × 2
   Alquiler21CCAA CCAA.x                    
            &lt;dbl&gt; &lt;chr&gt;                     
 1           33.3 Melilla                   
 2           31.6 Cataluña                  
 3           29.4 Comunidad de Madrid       
 4           28.1 Islas Baleares            
 5           24.8 País Vasco                
 6           23.6 Canarias                  
 7           23.0 Aragón                    
 8           19.4 Comunidad Foral de Navarra
 9           19.0 Asturias                  
10           18.1 Comunidad Valenciana      
11           17.6 Ceuta                     
12           17.5 Comunidad de Murcia       
13           17.1 La Rioja                  
14           16.2 Cantabria                 
15           16.0 Castilla y León           
16           15.6 Galicia                   
17           14.4 Castilla-La Mancha        
18           12.8 Andalucía                 
19           10.4 Extremadura               </code></pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Top CCAA con más propiedad en 2011</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>top_propiedad_2011 <span class="ot">&lt;-</span> jovenes_total <span class="sc">%&gt;%</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Propiedad11CCAA)) <span class="sc">%&gt;%</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">distinct</span>(Propiedad11CCAA, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(Propiedad11CCAA, CCAA.x)</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>top_propiedad_2011</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 19 × 2
   Propiedad11CCAA CCAA.x                    
             &lt;dbl&gt; &lt;chr&gt;                     
 1            83.1 País Vasco                
 2            83.0 Comunidad Valenciana      
 3            82.9 Comunidad Foral de Navarra
 4            82.4 Comunidad de Murcia       
 5            81.6 Andalucía                 
 6            81.4 Cantabria                 
 7            81.2 Castilla-La Mancha        
 8            81.0 Castilla y León           
 9            80.6 La Rioja                  
10            79.0 Aragón                    
11            77.7 Extremadura               
12            76.9 Asturias                  
13            75.6 Galicia                   
14            75.5 Comunidad de Madrid       
15            73.4 Cataluña                  
16            70.8 Canarias                  
17            69.6 Melilla                   
18            69.5 Islas Baleares            
19            68.4 Ceuta                     </code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Top CCCAA con más alquiler en 2011</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>top_alquiler_2011 <span class="ot">&lt;-</span> jovenes_total <span class="sc">%&gt;%</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">distinct</span>(Alquiler11CCAA, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Alquiler11CCAA)) <span class="sc">%&gt;%</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(Alquiler11CCAA, CCAA.x)</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>top_propiedad_2021</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 19 × 2
   Propiedad21CCAA CCAA.x                    
             &lt;dbl&gt; &lt;chr&gt;                     
 1            77.3 Andalucía                 
 2            76.4 Extremadura               
 3            76.2 Castilla-La Mancha        
 4            75.1 Castilla y León           
 5            74.7 Comunidad de Murcia       
 6            74.2 La Rioja                  
 7            73.8 Comunidad Valenciana      
 8            72.4 Ceuta                     
 9            72.3 Comunidad Foral de Navarra
10            71.6 País Vasco                
11            71.6 Cantabria                 
12            70.6 Galicia                   
13            69.3 Asturias                  
14            69.1 Aragón                    
15            65.1 Comunidad de Madrid       
16            62.9 Canarias                  
17            61.7 Islas Baleares            
18            60.6 Melilla                   
19            60.1 Cataluña                  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>top_propiedad_2011</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 19 × 2
   Propiedad11CCAA CCAA.x                    
             &lt;dbl&gt; &lt;chr&gt;                     
 1            83.1 País Vasco                
 2            83.0 Comunidad Valenciana      
 3            82.9 Comunidad Foral de Navarra
 4            82.4 Comunidad de Murcia       
 5            81.6 Andalucía                 
 6            81.4 Cantabria                 
 7            81.2 Castilla-La Mancha        
 8            81.0 Castilla y León           
 9            80.6 La Rioja                  
10            79.0 Aragón                    
11            77.7 Extremadura               
12            76.9 Asturias                  
13            75.6 Galicia                   
14            75.5 Comunidad de Madrid       
15            73.4 Cataluña                  
16            70.8 Canarias                  
17            69.6 Melilla                   
18            69.5 Islas Baleares            
19            68.4 Ceuta                     </code></pre>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>top_alquiler_2021</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 19 × 2
   Alquiler21CCAA CCAA.x                    
            &lt;dbl&gt; &lt;chr&gt;                     
 1           33.3 Melilla                   
 2           31.6 Cataluña                  
 3           29.4 Comunidad de Madrid       
 4           28.1 Islas Baleares            
 5           24.8 País Vasco                
 6           23.6 Canarias                  
 7           23.0 Aragón                    
 8           19.4 Comunidad Foral de Navarra
 9           19.0 Asturias                  
10           18.1 Comunidad Valenciana      
11           17.6 Ceuta                     
12           17.5 Comunidad de Murcia       
13           17.1 La Rioja                  
14           16.2 Cantabria                 
15           16.0 Castilla y León           
16           15.6 Galicia                   
17           14.4 Castilla-La Mancha        
18           12.8 Andalucía                 
19           10.4 Extremadura               </code></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>top_alquiler_2011</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 19 × 2
   Alquiler11CCAA CCAA.x                    
            &lt;dbl&gt; &lt;chr&gt;                     
 1          23.0  Melilla                   
 2          22.0  Islas Baleares            
 3          20    Cataluña                  
 4          19.1  Comunidad de Madrid       
 5          17.4  Ceuta                     
 6          15.0  Asturias                  
 7          14.1  Canarias                  
 8          12.6  Aragón                    
 9          12.4  Galicia                   
10          12.3  La Rioja                  
11          10.9  País Vasco                
12          10.5  Comunidad de Murcia       
13           9.76 Comunidad Foral de Navarra
14           9.73 Castilla-La Mancha        
15           9.64 Comunidad Valenciana      
16           9.43 Extremadura               
17           9.06 Cantabria                 
18           8.93 Castilla y León           
19           8.72 Andalucía                 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizar las cuatro tablas en cuatro gráficos de barras horizontales</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>plot_propiedad_2021 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(jovenes_total, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(CCAA.x, Propiedad21CCAA), <span class="at">y =</span> Propiedad21CCAA)) <span class="sc">+</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="st">"skyblue"</span>) <span class="sc">+</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Top CCAA con más propiedad en 2021"</span>, <span class="at">x =</span> <span class="st">"CCAA"</span>, <span class="at">y =</span> <span class="st">"Proporción de propiedad"</span>) <span class="sc">+</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>plot_alquiler_2021 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(jovenes_total, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(CCAA.x, Alquiler21CCAA), <span class="at">y =</span> Alquiler21CCAA)) <span class="sc">+</span></span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="st">"salmon"</span>) <span class="sc">+</span></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Top CCAA con más alquiler en 2021"</span>, <span class="at">x =</span> <span class="st">"CCAA"</span>, <span class="at">y =</span> <span class="st">"Proporción de alquiler"</span>) <span class="sc">+</span></span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a>plot_propiedad_2011 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(jovenes_total, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(CCAA.x, Propiedad11CCAA), <span class="at">y =</span> Propiedad11CCAA)) <span class="sc">+</span></span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="st">"skyblue"</span>) <span class="sc">+</span></span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Top CCAA con más propiedad en 2011"</span>, <span class="at">x =</span> <span class="st">"CCAA"</span>, <span class="at">y =</span> <span class="st">"Proporción de propiedad"</span>) <span class="sc">+</span></span>
<span id="cb36-17"><a href="#cb36-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb36-18"><a href="#cb36-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span>
<span id="cb36-19"><a href="#cb36-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-20"><a href="#cb36-20" aria-hidden="true" tabindex="-1"></a>plot_alquiler_2011 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(jovenes_total, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(CCAA.x, Alquiler11CCAA), <span class="at">y =</span> Alquiler11CCAA)) <span class="sc">+</span></span>
<span id="cb36-21"><a href="#cb36-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="st">"salmon"</span>) <span class="sc">+</span></span>
<span id="cb36-22"><a href="#cb36-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Top CCAA con más alquiler en 2011"</span>, <span class="at">x =</span> <span class="st">"CCAA"</span>, <span class="at">y =</span> <span class="st">"Proporción de alquiler"</span>) <span class="sc">+</span></span>
<span id="cb36-23"><a href="#cb36-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb36-24"><a href="#cb36-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span>
<span id="cb36-25"><a href="#cb36-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-26"><a href="#cb36-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Mostrar los gráficos</span></span>
<span id="cb36-27"><a href="#cb36-27" aria-hidden="true" tabindex="-1"></a><span class="fu">ggarrange</span>(plot_propiedad_2021, plot_alquiler_2021, plot_propiedad_2011, plot_alquiler_2011, <span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">ncol =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Jovenes_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
<p>Las CCAA con más propiedad entre jóvenes en 2011 son País Vasco (83,12%), Comunidad Valenciana, Navarra, Murcia y Andalucía. Sin embargo, en 2021 éstas son Andalucía con un máximo de 77.31%, seguido de Extremadura, Castilla-La Mancha, Castilla y León y Comunidad de Murcia.</p>
<p>Esto muestra que ha habido un descenso generalizado de la propiedad en toda España, pero éste no ha sido homogéneo. Andalucía, por ejemplo, sólo pierde un 4%; mientras que País Vasco experimenta un descenso del 12%.</p>
<p>Con respecto a los valores más bajos de propiedad en 2011, éstos eran CCAA pequeñas como las islas y Ceuta y Melilla, así como Cataluña y Madrid. Esta tendencia sí se mantiene en 2021, salvo Ceuta, que pasa a tener más porcentaje de propiedad y sale de las CCAA más bajas.</p>
<p>Alquiler. El alquiler sobresalía en 2011 en las CCAA de Melilla, Baleares, Cataluña, Madrid. En 2021, si bien Melilla sigue encabezando la lista, ha entrado entre las CCAA con mayor alquiler País Vasco, que parece ser el caso más dramático, Aragón o Comunitat Valenciana Además, en las CCAA con poca proproción de alquiler, éste ha aumentado pero poco; y cuanto más alquiler en 2011, más ha aumentado para 2021. T</p>
<section id="provincias" class="level3">
<h3 class="anchored" data-anchor-id="provincias">Provincias</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Top provincias con más propiedad en 2021</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>top_propiedad_2021 <span class="ot">&lt;-</span> jovenes_total <span class="sc">%&gt;%</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Propiedad21Prov)) <span class="sc">%&gt;%</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(Propiedad21Prov, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Propiedad21Prov, PROV_LITERAL)</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>top_propiedad_2021</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 50 × 2
   Propiedad21Prov PROV_LITERAL
             &lt;dbl&gt; &lt;chr&gt;       
 1            84.2 Jaén        
 2            79.8 Ciudad Real 
 3            79.7 Córdoba     
 4            78.8 Sevilla     
 5            78.6 Albacete    
 6            78.3 Cádiz       
 7            77.6 Salamanca   
 8            77.1 Ávila       
 9            77.1 Málaga      
10            76.9 Palencia    
# ℹ 40 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Top CCAA con más alquiler en 2021</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>top_alquiler_2021 <span class="ot">&lt;-</span> jovenes_total <span class="sc">%&gt;%</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Alquiler21Prov)) <span class="sc">%&gt;%</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">distinct</span>(Alquiler21Prov, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(Alquiler21Prov, PROV_LITERAL)</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>top_alquiler_2021</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 51 × 2
   Alquiler21Prov PROV_LITERAL  
            &lt;dbl&gt; &lt;chr&gt;         
 1           33.3 Melilla       
 2           33.0 Barcelona     
 3           30.1 Girona        
 4           29.4 Madrid        
 5           28.5 Araba/Álava   
 6           28.1 Balears, Illes
 7           27.6 Lleida        
 8           25.3 Gipuzkoa      
 9           25.0 Zaragoza      
10           24.9 Tarragona     
# ℹ 41 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Top CCAA con más propiedad en 2011</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>top_propiedad_2011 <span class="ot">&lt;-</span> jovenes_total <span class="sc">%&gt;%</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Propiedad11Prov)) <span class="sc">%&gt;%</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">distinct</span>(Propiedad11Prov, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(Propiedad11Prov, PROV_LITERAL)</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>top_propiedad_2011</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 51 × 2
   Propiedad11Prov PROV_LITERAL     
             &lt;dbl&gt; &lt;chr&gt;            
 1            84.3 Alicante/Alacant 
 2            83.7 Jaén             
 3            83.4 Araba/Álava      
 4            83.3 Valencia/València
 5            83.3 Ciudad Real      
 6            83.1 Bizkaia          
 7            83.1 Burgos           
 8            83.0 Gipuzkoa         
 9            83.0 Zamora           
10            82.9 Navarra          
# ℹ 41 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Top CCCAA con más alquiler en 2011</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>top_alquiler_2011 <span class="ot">&lt;-</span> jovenes_total <span class="sc">%&gt;%</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">distinct</span>(Alquiler11Prov, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Alquiler11Prov)) <span class="sc">%&gt;%</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(Alquiler11Prov, PROV_LITERAL)</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>top_propiedad_2021</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 50 × 2
   Propiedad21Prov PROV_LITERAL
             &lt;dbl&gt; &lt;chr&gt;       
 1            84.2 Jaén        
 2            79.8 Ciudad Real 
 3            79.7 Córdoba     
 4            78.8 Sevilla     
 5            78.6 Albacete    
 6            78.3 Cádiz       
 7            77.6 Salamanca   
 8            77.1 Ávila       
 9            77.1 Málaga      
10            76.9 Palencia    
# ℹ 40 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>top_propiedad_2011</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 51 × 2
   Propiedad11Prov PROV_LITERAL     
             &lt;dbl&gt; &lt;chr&gt;            
 1            84.3 Alicante/Alacant 
 2            83.7 Jaén             
 3            83.4 Araba/Álava      
 4            83.3 Valencia/València
 5            83.3 Ciudad Real      
 6            83.1 Bizkaia          
 7            83.1 Burgos           
 8            83.0 Gipuzkoa         
 9            83.0 Zamora           
10            82.9 Navarra          
# ℹ 41 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>top_alquiler_2021</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 51 × 2
   Alquiler21Prov PROV_LITERAL  
            &lt;dbl&gt; &lt;chr&gt;         
 1           33.3 Melilla       
 2           33.0 Barcelona     
 3           30.1 Girona        
 4           29.4 Madrid        
 5           28.5 Araba/Álava   
 6           28.1 Balears, Illes
 7           27.6 Lleida        
 8           25.3 Gipuzkoa      
 9           25.0 Zaragoza      
10           24.9 Tarragona     
# ℹ 41 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>top_alquiler_2011</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 51 × 2
   Alquiler11Prov PROV_LITERAL  
            &lt;dbl&gt; &lt;chr&gt;         
 1           23.0 Melilla       
 2           22.0 Balears, Illes
 3           21.3 Girona        
 4           21.2 Barcelona     
 5           19.1 Madrid        
 6           17.4 Ceuta         
 7           16.6 Lleida        
 8           15.0 Asturias      
 9           14.7 Palmas, Las   
10           14.5 Tarragona     
# ℹ 41 more rows</code></pre>
</div>
</div>
<p>Provincias como Barcelona han perdido un 15% de propiedad, así como Álava y en general la Comunitat Valenciana, como veíamos antes.</p>
<p>A primera vista, no parece que la proporción de vivienda turística explique totalmente la menor propiedad. Algunos casos como el de la Comunitat Valenciana, las islas o Cataluña (especialmente Barcelona) podrían relacionarse con esto. Pero en casos como la provincia de Málaga que tiene una cantidad enorme de vivienda turística, no se ve este descenso de propiedad; o en casos como el País Vasco y Zaragoza, hay gran descenso de propiedad pero no hay mucho turismo.</p>
<p>Las únicas provincias con más propiedad en 2021 que en 2011 son Jaén, Cáceres y Teruel, aunque con una variación muy pequeña. Son ciudades con menos población joven (y población en general).</p>
</section>
<section id="por-municipios" class="level3">
<h3 class="anchored" data-anchor-id="por-municipios">Por municipios</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>top_dif_propiedad <span class="ot">&lt;-</span> jovenes_total <span class="sc">%&gt;%</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">distinct</span>(PropiedadDifMun, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(PropiedadDifMun)) <span class="sc">%&gt;%</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(PropiedadDifMun, CCAA.x, PROV_LITERAL, MUN_LITERAL, CMUN)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Hay municipios donde sí están comprando más los jóvenes que en 2011, contrariando la tendencia general. Con un máximo de +9%, encontramos Úbeda, un municipio grande en Jaén. Seguido de Nerja en Málaga, Conil de la Frontera, Ronda, Écija, Carmona… También encontramos a Ceuta. Son municipios andaluces que no son las capitales de provincia pero son significativos, ofrecen puestos de trabajo, incluso una universidad en Carmona. Son municipios cercanos a la capital y donde es frecuente que la gente viaje todos los días a ella para trabajar. Podríamos ver por tanto que son municipios en las áreas metropolitanas. Se podría comprobar si ésto se produce por motivos laborales viendo la situación laboral.</p>
<p>Por otra parte, vemos municipios cuyo nombre desconocemos al tener menos de 20000 habitantes, pertenecientes de nuevo a Andalucía o a Castilla y León, Galicia…</p>
<p>Por otro lado, los municipios donde ahora residen menos los jóvenes en propiedad son de Cataluña, Comunitat Valenciana o País Vasco. Podría analizarse si en Comunitat Valenciana por ejempo se produce más en municipios con más vivienda turística (ej. Benidorm aparece con -17%).</p>
<p>Este aumento es mayor que en el grupo de ‘adultos’, y no coinciden todos los municipios. El aumento de alquiler en País Vasco, además, es mucho más notable entre jóvenes.</p>
</section>
</section>
<section id="propiedad-por-compra-de-jóvenes-en-2011" class="level1">
<h1>Propiedad por compra de jóvenes en 2011</h1>
<p>Un 38.59% de los jóvenes en 2011 tenían un régimen de vivienda de ‘hipoteca’, siendo el régimen de tenencia más frecuente seguido de ‘propiedad’. Sólo un 12.87% vivían de alquiler. La edad media de los jóvenes con hipoteca era un año superior a la población joven general.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(jovenes11,<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x=</span>TENEN_r, <span class="at">fill =</span> TENEN_r))<span class="sc">+</span><span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">y=</span>..count..<span class="sc">/</span><span class="fu">sum</span>(..count..)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The dot-dot notation (`..count..`) was deprecated in ggplot2 3.4.0.
ℹ Please use `after_stat(count)` instead.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="Jovenes_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>(<span class="fu">sum</span>(jovenes11<span class="sc">$</span>TENEN_r <span class="sc">==</span> <span class="st">"Hipoteca"</span>) <span class="sc">/</span> <span class="fu">nrow</span>(jovenes11)) <span class="sc">*</span> <span class="dv">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 38.591</code></pre>
</div>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>(<span class="fu">sum</span>(jovenes11<span class="sc">$</span>TENEN_r <span class="sc">==</span> <span class="st">"Alquiler"</span>) <span class="sc">/</span> <span class="fu">nrow</span>(jovenes11)) <span class="sc">*</span> <span class="dv">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 12.87363</code></pre>
</div>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>hipotecados <span class="ot">&lt;-</span> jovenes11 <span class="sc">|&gt;</span> </span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(TENEN_r <span class="sc">==</span> <span class="st">"Hipoteca"</span>)</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Edad media</span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(jovenes11<span class="sc">$</span>EDAD)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 26.50363</code></pre>
</div>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(hipotecados<span class="sc">$</span>EDAD)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 27.5172</code></pre>
</div>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Por municipio</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>jovenes11 <span class="ot">&lt;-</span> jovenes11 <span class="sc">|&gt;</span> </span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(cusec) <span class="sc">|&gt;</span> </span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">Hipoteca11Mun =</span> <span class="fu">round</span>((<span class="fu">sum</span>(TENEN_r <span class="sc">==</span> <span class="st">"Hipoteca"</span>) <span class="sc">/</span> <span class="fu">n</span>()) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>))</span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a>hipotecas <span class="ot">&lt;-</span> jovenes11 <span class="sc">|&gt;</span> </span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(cusec,Hipoteca11Mun) <span class="sc">|&gt;</span> </span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(cusec, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb62-10"><a href="#cb62-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-11"><a href="#cb62-11" aria-hidden="true" tabindex="-1"></a>jovenes_total <span class="ot">&lt;-</span> jovenes_total <span class="sc">|&gt;</span> </span>
<span id="cb62-12"><a href="#cb62-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(hipotecas, <span class="at">by =</span> <span class="st">"cusec"</span>)</span>
<span id="cb62-13"><a href="#cb62-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-14"><a href="#cb62-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-15"><a href="#cb62-15" aria-hidden="true" tabindex="-1"></a>jovenes_total <span class="sc">|&gt;</span> </span>
<span id="cb62-16"><a href="#cb62-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Hipoteca11Mun)) <span class="sc">%&gt;%</span></span>
<span id="cb62-17"><a href="#cb62-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(cusec, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb62-18"><a href="#cb62-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(PROV_LITERAL, MUN_LITERAL, Hipoteca11Mun)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 543 × 3
   PROV_LITERAL       MUN_LITERAL   Hipoteca11Mun
   &lt;chr&gt;              &lt;chr&gt;                 &lt;dbl&gt;
 1 Madrid             Arroyomolinos          86.3
 2 Guadalajara        &lt;NA&gt;                   68.8
 3 Zamora             &lt;NA&gt;                   67.1
 4 Madrid             Valdemoro              66.7
 5 Cantabria          Piélagos               66.2
 6 Toledo             Illescas               66.1
 7 Tarragona          Vila-seca              65.4
 8 Balears, Illes     Marratxí               65.0
 9 Araba/Álava        &lt;NA&gt;                   64.5
10 Castellón/Castelló Onda                   63.6
# ℹ 533 more rows</code></pre>
</div>
</div>
</section>
<section id="definiendo-a-los-jóvenes-que-compran" class="level1">
<h1>Definiendo a los jóvenes que compran</h1>
<section id="en-2011" class="level2">
<h2 class="anchored" data-anchor-id="en-2011">En 2011</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>compra11 <span class="ot">&lt;-</span> microdatos2011 <span class="sc">|&gt;</span> </span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(CPRO, CMUN, EDAD, ANAC, NORDEN, ANORES, ANOM, LTRABA, MUNTRABA, TENEN, CON_NORDEN, OPA_NORDEN, TIPOPER, ESTHOG, EDADPAD, EDADMAD) </span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>compra11 <span class="ot">&lt;-</span> compra11 <span class="sc">|&gt;</span> </span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(EDAD <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">18</span><span class="sc">:</span><span class="dv">35</span>), <span class="co"># Jóvenes</span></span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a>         TIPOPER <span class="sc">!=</span> <span class="st">"H"</span>, <span class="co"># Que no son hijos en el núcleo</span></span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a>         <span class="fu">is.na</span>(EDADPAD), <span class="co"># Que no conviven con el padre</span></span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a>         <span class="fu">is.na</span>(EDADMAD)) <span class="sc">|&gt;</span> <span class="co"># Que no conviven con la madre </span></span>
<span id="cb64-9"><a href="#cb64-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>EDADPAD, <span class="sc">-</span>EDADMAD) <span class="sc">|&gt;</span> </span>
<span id="cb64-10"><a href="#cb64-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(ESTHOG <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">01</span>, <span class="dv">02</span>, <span class="dv">05</span>, <span class="dv">07</span>, <span class="dv">08</span>, <span class="dv">10</span>, <span class="dv">11</span>)) <span class="co"># No es un hogar con una persona sola de +65 años ni hijos de más de 25</span></span>
<span id="cb64-11"><a href="#cb64-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-12"><a href="#cb64-12" aria-hidden="true" tabindex="-1"></a>compra11 <span class="ot">&lt;-</span> compra11 <span class="sc">|&gt;</span> </span>
<span id="cb64-13"><a href="#cb64-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mayor =</span> <span class="fu">ifelse</span>(ANORES <span class="sc">-</span> ANAC <span class="sc">&gt;</span> <span class="dv">18</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb64-14"><a href="#cb64-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(mayor <span class="sc">==</span> <span class="cn">TRUE</span>) <span class="co"># Que era mayor de edad en la última mudanza</span></span>
<span id="cb64-15"><a href="#cb64-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb64-16"><a href="#cb64-16" aria-hidden="true" tabindex="-1"></a><span class="co">#Recodificar tenen viv</span></span>
<span id="cb64-17"><a href="#cb64-17" aria-hidden="true" tabindex="-1"></a>compra11 <span class="ot">&lt;-</span> compra11 <span class="sc">|&gt;</span>  </span>
<span id="cb64-18"><a href="#cb64-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb64-19"><a href="#cb64-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">TENEN_r =</span> <span class="fu">case_when</span>(</span>
<span id="cb64-20"><a href="#cb64-20" aria-hidden="true" tabindex="-1"></a>      TENEN <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">"Propiedad por compra, pagada"</span>,</span>
<span id="cb64-21"><a href="#cb64-21" aria-hidden="true" tabindex="-1"></a>      TENEN <span class="sc">==</span> <span class="dv">2</span> <span class="sc">~</span> <span class="st">"Propiedad por compra, pagos pendientes"</span>,</span>
<span id="cb64-22"><a href="#cb64-22" aria-hidden="true" tabindex="-1"></a>      TENEN <span class="sc">==</span> <span class="dv">3</span> <span class="sc">~</span> <span class="st">"Propiedad por herencia o donación"</span>,</span>
<span id="cb64-23"><a href="#cb64-23" aria-hidden="true" tabindex="-1"></a>      TENEN <span class="sc">==</span> <span class="dv">4</span> <span class="sc">~</span> <span class="st">"Alquiler"</span>,</span>
<span id="cb64-24"><a href="#cb64-24" aria-hidden="true" tabindex="-1"></a>      TENEN <span class="sc">==</span> <span class="dv">5</span> <span class="sc">~</span> <span class="st">"Cedida o a bajo precio"</span>,</span>
<span id="cb64-25"><a href="#cb64-25" aria-hidden="true" tabindex="-1"></a>      TENEN <span class="sc">==</span> <span class="dv">6</span> <span class="sc">~</span> <span class="st">"Otro"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb64-26"><a href="#cb64-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb64-27"><a href="#cb64-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">TENEN_VIV =</span> <span class="fu">case_when</span>(</span>
<span id="cb64-28"><a href="#cb64-28" aria-hidden="true" tabindex="-1"></a>      TENEN_r <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Propiedad por compra, pagada"</span>, <span class="st">"Propiedad por compra, pagos pendientes"</span>) <span class="sc">~</span> <span class="st">"Compra"</span>,</span>
<span id="cb64-29"><a href="#cb64-29" aria-hidden="true" tabindex="-1"></a>      TENEN_r <span class="sc">==</span> <span class="st">"Propiedad por herencia o donación"</span> <span class="sc">~</span> <span class="st">"Herencia o donación"</span>,</span>
<span id="cb64-30"><a href="#cb64-30" aria-hidden="true" tabindex="-1"></a>      TENEN_r <span class="sc">==</span> <span class="st">"Alquiler"</span> <span class="sc">~</span> <span class="st">"Alquiler"</span>,</span>
<span id="cb64-31"><a href="#cb64-31" aria-hidden="true" tabindex="-1"></a>      TENEN_r <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Cedida o a bajo precio"</span>, <span class="st">"Otro"</span>) <span class="sc">~</span> <span class="st">"Otro"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Añadir nombres municipios/provincias</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear los códigos cusec de los municipios no especificados</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>cusec_991 <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">"%05d"</span>, <span class="fu">seq</span>(<span class="dv">1991</span>, <span class="dv">52991</span>, <span class="at">by =</span> <span class="dv">1000</span>))</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>cusec_992 <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">"%05d"</span>, <span class="fu">seq</span>(<span class="dv">1992</span>, <span class="dv">52992</span>, <span class="at">by =</span> <span class="dv">1000</span>))</span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>cusec_993 <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">"%05d"</span>, <span class="fu">seq</span>(<span class="dv">1993</span>, <span class="dv">52993</span>, <span class="at">by =</span> <span class="dv">1000</span>))</span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>cusec_994 <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">"%05d"</span>, <span class="fu">seq</span>(<span class="dv">1994</span>, <span class="dv">52994</span>, <span class="at">by =</span> <span class="dv">1000</span>))</span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>cusec <span class="ot">&lt;-</span> <span class="fu">c</span>(cusec_991, cusec_992, cusec_993, cusec_994)</span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a>MUN_LITERAL <span class="ot">&lt;-</span> </span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ifelse</span>(<span class="fu">substr</span>(cusec, <span class="dv">4</span>, <span class="dv">5</span>) <span class="sc">==</span> <span class="st">"91"</span>,<span class="st">"&lt;=2000"</span>,</span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ifelse</span>(<span class="fu">substr</span>(cusec, <span class="dv">4</span>, <span class="dv">5</span>) <span class="sc">==</span> <span class="st">"92"</span>, <span class="st">"2001 &lt;= 5000"</span>,</span>
<span id="cb65-11"><a href="#cb65-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ifelse</span>(<span class="fu">substr</span>(cusec, <span class="dv">4</span>, <span class="dv">5</span>) <span class="sc">==</span> <span class="st">"93"</span>, <span class="st">"5001 &lt;= 10000"</span>,</span>
<span id="cb65-12"><a href="#cb65-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ifelse</span>(<span class="fu">substr</span>(cusec, <span class="dv">4</span>, <span class="dv">5</span>) <span class="sc">==</span> <span class="st">"94"</span>, <span class="st">"10001 &lt;= 20000"</span>,<span class="st">"Otros"</span>))))</span>
<span id="cb65-13"><a href="#cb65-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-14"><a href="#cb65-14" aria-hidden="true" tabindex="-1"></a>df_rural <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(MUN_LITERAL, cusec)</span>
<span id="cb65-15"><a href="#cb65-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb65-16"><a href="#cb65-16" aria-hidden="true" tabindex="-1"></a>nombres_municipios <span class="ot">&lt;-</span> <span class="fu">rbind</span>(nombres_municipios, df_rural)</span>
<span id="cb65-17"><a href="#cb65-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb65-18"><a href="#cb65-18" aria-hidden="true" tabindex="-1"></a><span class="co">#Añado id para evitar duplicados</span></span>
<span id="cb65-19"><a href="#cb65-19" aria-hidden="true" tabindex="-1"></a>compra11 <span class="ot">&lt;-</span> compra11 <span class="sc">|&gt;</span> </span>
<span id="cb65-20"><a href="#cb65-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">id =</span> <span class="fu">row_number</span>())</span>
<span id="cb65-21"><a href="#cb65-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-22"><a href="#cb65-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-23"><a href="#cb65-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Añadir nombres de provincias y municipios</span></span>
<span id="cb65-24"><a href="#cb65-24" aria-hidden="true" tabindex="-1"></a>compra11 <span class="ot">&lt;-</span> compra11 <span class="sc">|&gt;</span> </span>
<span id="cb65-25"><a href="#cb65-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb65-26"><a href="#cb65-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">CMUN =</span> <span class="fu">str_pad</span>(CMUN, <span class="at">width =</span> <span class="dv">3</span>, <span class="at">side =</span> <span class="st">"left"</span>, <span class="at">pad =</span> <span class="st">"0"</span>),</span>
<span id="cb65-27"><a href="#cb65-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">CPRO =</span> <span class="fu">str_pad</span>(CPRO, <span class="at">width =</span> <span class="dv">2</span>, <span class="at">side =</span> <span class="st">"left"</span>, <span class="at">pad =</span> <span class="st">"0"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb65-28"><a href="#cb65-28" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(  </span>
<span id="cb65-29"><a href="#cb65-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">CPRO =</span> <span class="fu">trimws</span>(CPRO),</span>
<span id="cb65-30"><a href="#cb65-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">CMUN =</span> <span class="fu">trimws</span>(CMUN),</span>
<span id="cb65-31"><a href="#cb65-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">cusec =</span> <span class="fu">paste0</span>(CPRO, CMUN)) <span class="sc">|&gt;</span> </span>
<span id="cb65-32"><a href="#cb65-32" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb65-33"><a href="#cb65-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(nombres_municipios, <span class="at">by =</span> <span class="st">"cusec"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb65-34"><a href="#cb65-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(nombres_provincias, <span class="at">by =</span> <span class="st">"CPRO"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb65-35"><a href="#cb65-35" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb65-36"><a href="#cb65-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(id, <span class="at">.keep_all =</span> T)</span>
<span id="cb65-37"><a href="#cb65-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-38"><a href="#cb65-38" aria-hidden="true" tabindex="-1"></a>compra11_r <span class="ot">&lt;-</span> compra11 <span class="sc">|&gt;</span> </span>
<span id="cb65-39"><a href="#cb65-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(TENEN_r <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Propiedad por compra, pagada"</span>, <span class="st">"Propiedad por compra, pagos pendientes"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="en-2021" class="level2">
<h2 class="anchored" data-anchor-id="en-2021">En 2021</h2>
<p>Hay limitaciones, porque no puedo retirar exactamente que NO sean herencia.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>compra21 <span class="ot">&lt;-</span> microdatos2021 <span class="sc">|&gt;</span> </span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(CPRO, CMUN, VAREDAD, ANAC, TENEN_VIV, NORDEN, RESI_NACIM, VARANORES, VARANOM, CMUN_ANT, CMUN_UNANO, RESI_UNANO, CMUN_DANO, RESI_DANO, LTRAB, CMUN_TRAB, LEST, CMUN_EST, NORDEN_CON, NORDEN_OPA, TIPOPER, SEXO_MAD, SEXO_PAD, ESTRUC_HOG) </span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>compra21 <span class="ot">&lt;-</span> compra21 <span class="sc">|&gt;</span> </span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(VAREDAD <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">18</span><span class="sc">:</span><span class="dv">35</span>), <span class="co"># Jóvenes</span></span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a>         TIPOPER <span class="sc">!=</span> <span class="st">"H"</span>, <span class="co"># Que no son hijos en el núcleo</span></span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a>         SEXO_PAD <span class="sc">==</span> <span class="st">"N"</span>, <span class="co"># Que no conviven con el padre</span></span>
<span id="cb66-8"><a href="#cb66-8" aria-hidden="true" tabindex="-1"></a>         SEXO_MAD <span class="sc">==</span> <span class="st">"N"</span>) <span class="sc">|&gt;</span>  <span class="co"># Que no conviven con la madre</span></span>
<span id="cb66-9"><a href="#cb66-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ESTRUC_HOG =</span> <span class="fu">as.numeric</span>(ESTRUC_HOG)) <span class="sc">|&gt;</span> </span>
<span id="cb66-10"><a href="#cb66-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(ESTRUC_HOG <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">01</span>, <span class="dv">02</span>, <span class="dv">05</span>, <span class="dv">07</span>, <span class="dv">08</span>, <span class="dv">10</span>, <span class="dv">11</span>)) <span class="co"># No es un hogar con una persona sola de +65 años ni hijos de más de 25</span></span>
<span id="cb66-11"><a href="#cb66-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-12"><a href="#cb66-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Filtrar para haberse mudado a otra vivienda con mínimo 18 años, en una forma amplia</span></span>
<span id="cb66-13"><a href="#cb66-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-14"><a href="#cb66-14" aria-hidden="true" tabindex="-1"></a>compra21 <span class="ot">&lt;-</span> compra21 <span class="sc">|&gt;</span> </span>
<span id="cb66-15"><a href="#cb66-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb66-16"><a href="#cb66-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">VARANORES_r =</span> <span class="fu">case_when</span>(</span>
<span id="cb66-17"><a href="#cb66-17" aria-hidden="true" tabindex="-1"></a>      VARANORES <span class="sc">==</span> <span class="st">"0005"</span> <span class="sc">~</span> <span class="fu">as.numeric</span>(<span class="dv">2015</span>),</span>
<span id="cb66-18"><a href="#cb66-18" aria-hidden="true" tabindex="-1"></a>      VARANORES <span class="sc">==</span> <span class="st">"0004"</span> <span class="sc">~</span> <span class="fu">as.numeric</span>(<span class="dv">2010</span>),</span>
<span id="cb66-19"><a href="#cb66-19" aria-hidden="true" tabindex="-1"></a>      VARANORES <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"9999"</span>, <span class="st">"0003"</span>) <span class="sc">~</span> <span class="fu">as.numeric</span>(<span class="dv">2000</span>), </span>
<span id="cb66-20"><a href="#cb66-20" aria-hidden="true" tabindex="-1"></a>      VARANORES <span class="sc">==</span> <span class="st">" "</span> <span class="sc">~</span> <span class="cn">NA</span>,</span>
<span id="cb66-21"><a href="#cb66-21" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="fu">as.numeric</span>(VARANORES)),</span>
<span id="cb66-22"><a href="#cb66-22" aria-hidden="true" tabindex="-1"></a>      <span class="at">ANAC =</span> <span class="fu">as.numeric</span>(ANAC),</span>
<span id="cb66-23"><a href="#cb66-23" aria-hidden="true" tabindex="-1"></a>      <span class="at">mayor =</span> <span class="fu">ifelse</span>(VARANORES_r <span class="sc">-</span> ANAC <span class="sc">&gt;</span> <span class="dv">18</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb66-24"><a href="#cb66-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(mayor <span class="sc">==</span> <span class="cn">TRUE</span>)</span>
<span id="cb66-25"><a href="#cb66-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-26"><a href="#cb66-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-27"><a href="#cb66-27" aria-hidden="true" tabindex="-1"></a>compra21 <span class="ot">&lt;-</span> compra21 <span class="sc">|&gt;</span> </span>
<span id="cb66-28"><a href="#cb66-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb66-29"><a href="#cb66-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">TENEN_VIV =</span> <span class="fu">case_when</span>(</span>
<span id="cb66-30"><a href="#cb66-30" aria-hidden="true" tabindex="-1"></a>      TENEN_VIV <span class="sc">==</span> <span class="dv">2</span> <span class="sc">~</span> <span class="st">"Propiedad"</span>,</span>
<span id="cb66-31"><a href="#cb66-31" aria-hidden="true" tabindex="-1"></a>      TENEN_VIV <span class="sc">==</span> <span class="dv">3</span> <span class="sc">~</span> <span class="st">"Alquiler"</span>,</span>
<span id="cb66-32"><a href="#cb66-32" aria-hidden="true" tabindex="-1"></a>      TENEN_VIV <span class="sc">==</span> <span class="dv">4</span> <span class="sc">~</span> <span class="st">"Otro"</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Añadir nombres</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Añado id para evitar duplicados</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>compra21 <span class="ot">&lt;-</span> compra21 <span class="sc">|&gt;</span> </span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">id =</span> <span class="fu">row_number</span>())</span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a>compra21 <span class="ot">&lt;-</span> compra21 <span class="sc">|&gt;</span> </span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">CMUN =</span> <span class="fu">str_pad</span>(CMUN, <span class="at">width =</span> <span class="dv">3</span>, <span class="at">side =</span> <span class="st">"left"</span>, <span class="at">pad =</span> <span class="st">"0"</span>),</span>
<span id="cb67-9"><a href="#cb67-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">CPRO =</span> <span class="fu">str_pad</span>(CPRO, <span class="at">width =</span> <span class="dv">2</span>, <span class="at">side =</span> <span class="st">"left"</span>, <span class="at">pad =</span> <span class="st">"0"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb67-10"><a href="#cb67-10" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(  </span>
<span id="cb67-11"><a href="#cb67-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">CPRO =</span> <span class="fu">trimws</span>(CPRO),</span>
<span id="cb67-12"><a href="#cb67-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">CMUN =</span> <span class="fu">trimws</span>(CMUN),</span>
<span id="cb67-13"><a href="#cb67-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">cusec =</span> <span class="fu">paste0</span>(CPRO, CMUN)) <span class="sc">|&gt;</span> </span>
<span id="cb67-14"><a href="#cb67-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb67-15"><a href="#cb67-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(nombres_municipios, <span class="at">by =</span> <span class="st">"cusec"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb67-16"><a href="#cb67-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(nombres_provincias, <span class="at">by =</span> <span class="st">"CPRO"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb67-17"><a href="#cb67-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb67-18"><a href="#cb67-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(id, <span class="at">.keep_all =</span> T)</span>
<span id="cb67-19"><a href="#cb67-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-20"><a href="#cb67-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-21"><a href="#cb67-21" aria-hidden="true" tabindex="-1"></a>compra21_r <span class="ot">&lt;-</span> compra21 <span class="sc">|&gt;</span> </span>
<span id="cb67-22"><a href="#cb67-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(TENEN_VIV <span class="sc">==</span> <span class="st">"Propiedad"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="descriptivo" class="level2">
<h2 class="anchored" data-anchor-id="descriptivo">Descriptivo</h2>
<section id="section" class="level3">
<h3 class="anchored" data-anchor-id="section">2011</h3>
<p>Hay menos jóvenes con las condiciones especificadas en 2021 que en 2011.</p>
<ul>
<li><p>Edad. La media de edad en 2011 es de 31,1, en 2021 es de 30,35.</p></li>
<li><p>Número de orden en el núcleo. La mitad de los casos tienen a la persona encuestada como primera persona en el orden del núcleo, con un 42,8% restante siendo la segunda persona. Le siguen un 4,1% siendo la tercera persona, un 2,3% la cuarta, 1% la quinta, y porecentajes desdeñables el resto. Hay una persona que es la persona número 24. Vemos exactamente quiénes son estas personas: personas con un 50% de desempleo (25% superior al resto). Residiendo en Ceuta, Melilla. Son 941 personas.</p></li>
<li><p>Orden de un pariente. Quizá quitar personas que su otro pariente tiene un orden superior (1, 2?) La mayoría de casos los parientes son el número 3, con 93%. (pueden ser hijos, por ejemplo). En un 44% de los casos no hay familiares.</p></li>
<li><p>Trabajo. La mayoría de personas trabajan en un municipio distinto al que residen (45,5%), seguido de personas que trabajan en el mismo municipio (36,6%).</p></li>
<li><p>Año de llegada a la vivienda. En la mayoría de los casos se llegó en 2006 o 2007 (es también la media). Sería una edad media de 25-26 años.</p></li>
<li><p>Condición dentro del núcleo. Un 79% delas personas son cónyuges, un 17.5% personas que viven solas y el resto madres y padres solteros.</p></li>
<li><p>Estructura del hogar. La mayoría de los casos, 44,8%, es un hogar formado por una pareja con hijos. En segundo lugar, 29,6%, hogar formado por pareja sin hijos. En tercer lugar, con 5,9%, ‘otro tipo de hogar’, que puede ser compañeros de piso no emparentados, o otros familiares. El último es padre o madre soltera.</p></li>
<li><p>Tipo de compra. En el 90,1% de los casos quedan pagos de la hipoteca pendientes.</p></li>
<li><p>Provincia. No da mucha información porque salen las provincias más y menos pobladas, no proporcionalmente según su población.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Edad</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(compra11_r<span class="sc">$</span>EDAD)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 31.46344</code></pre>
</div>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">prop.table</span>(<span class="fu">table</span>(compra11_r<span class="sc">$</span>EDAD)), <span class="at">digits =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
   18    19    20    21    22    23    24    25    26    27    28    29    30 
0.000 0.001 0.002 0.004 0.005 0.008 0.013 0.019 0.028 0.038 0.052 0.067 0.084 
   31    32    33    34    35 
0.105 0.120 0.137 0.153 0.165 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Número de orden</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">prop.table</span>(<span class="fu">table</span>(compra11_r<span class="sc">$</span>NORDEN)), <span class="at">digits =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    1     2     3     4     5     6     7     8     9    10    11    12    14 
0.495 0.428 0.041 0.023 0.010 0.003 0.001 0.000 0.000 0.000 0.000 0.000 0.000 
   16    24 
0.000 0.000 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>(<span class="fu">table</span>(compra11_r<span class="sc">$</span>NORDEN))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
     1      2      3      4      5      6      7      8      9     10     11 
107844  93334   8946   4935   2082    674    158     64     20     12      5 
    12     14     16     24 
     4      1      2      1 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>raros <span class="ot">&lt;-</span> compra11_r <span class="sc">|&gt;</span> </span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(NORDEN <span class="sc">&gt;</span> <span class="dv">5</span>)</span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="fu">is.na</span>(raros<span class="sc">$</span>LTRABA)) <span class="sc">*</span> <span class="dv">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 48.56536</code></pre>
</div>
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Otro pariente</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">prop.table</span>(<span class="fu">table</span>(compra11_r<span class="sc">$</span>OPA_NORDEN)), <span class="at">digits =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    1     2     3     4     5     6     7     8     9    10    11    12    13 
0.058 0.133 0.686 0.093 0.020 0.006 0.002 0.001 0.000 0.000 0.000 0.000 0.000 
   18    23 
0.000 0.000 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="fu">is.na</span>(compra11_r<span class="sc">$</span>OPA_NORDEN)) <span class="sc">*</span> <span class="dv">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 44.28013</code></pre>
</div>
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Trabajo</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="fu">is.na</span>(compra11_r<span class="sc">$</span>LTRABA)) <span class="sc">*</span> <span class="dv">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 23.74015</code></pre>
</div>
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">prop.table</span>(<span class="fu">table</span>(compra11_r<span class="sc">$</span>LTRABA)), <span class="at">digits =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    1     2     3     4     5 
0.091 0.086 0.366 0.455 0.003 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="fu">is.na</span>(compra11<span class="sc">$</span>LTRABA)) <span class="sc">*</span> <span class="dv">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 26.67891</code></pre>
</div>
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Año de llegada a la vivienda</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(compra11_r<span class="sc">$</span>ANORES)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2006.695</code></pre>
</div>
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">prop.table</span>(<span class="fu">table</span>(compra11_r<span class="sc">$</span>ANORES)), <span class="at">digits =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 1994  1995  1996  1997  1998  1999  2000  2001  2002  2003  2004  2005  2006 
0.000 0.000 0.001 0.002 0.005 0.007 0.016 0.023 0.034 0.049 0.071 0.099 0.130 
 2007  2008  2009  2010  2011 
0.129 0.121 0.123 0.126 0.062 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Condición dentro del núcleo</span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">prop.table</span>(<span class="fu">table</span>(compra11_r<span class="sc">$</span>TIPOPER)), <span class="at">digits =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
          C     M     P 
0.175 0.791 0.027 0.007 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Estructura del hogar</span></span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">prop.table</span>(<span class="fu">table</span>(compra11_r<span class="sc">$</span>ESTHOG)), <span class="at">digits =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    1     2     5     7     8    10    11 
0.052 0.072 0.029 0.296 0.448 0.045 0.059 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Régimen de tenencia</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">prop.table</span>(<span class="fu">table</span>(compra11_r<span class="sc">$</span>TENEN_r)), <span class="at">digits =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
          Propiedad por compra, pagada Propiedad por compra, pagos pendientes 
                                 0.099                                  0.901 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Provincias</span></span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">sort</span>(<span class="fu">prop.table</span>(<span class="fu">table</span>(compra11_r<span class="sc">$</span>PROV_LITERAL)), <span class="at">decreasing =</span> <span class="cn">TRUE</span>), <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
           Madrid         Barcelona Valencia/València 
       0.11718528        0.10383250        0.05873479 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(<span class="fu">sort</span>(<span class="fu">prop.table</span>(<span class="fu">table</span>(compra11_r<span class="sc">$</span>PROV_LITERAL)), <span class="at">decreasing =</span> <span class="cn">TRUE</span>), <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
      Soria       Ceuta     Melilla 
0.002411937 0.001082162 0.001013380 </code></pre>
</div>
</div>
</section>
<section id="section-1" class="level3">
<h3 class="anchored" data-anchor-id="section-1">2021</h3>
<ul>
<li><p>Edad. La edad es más joven lo cual me hace suponer que es por filtrar mal.</p></li>
<li><p>Número de orden. Un 37,3% es número 1, un 44,4% número 2, seguido de un 11,5% 3 y 4,6% 4. Hay más personas donde la persona joven no es número 1 ni 2, seguramente estoy incluyendo casos que no me interesan que no son compra. Quizá filtrar directamente a partir de 4?</p></li>
</ul>
<p>Las personas con un orden de 6 o más presentan más desempleo, al igual que en 2011. Son 1494.</p>
<ul>
<li><p>Trabajo. Un 29% no trabajan. La población joven con otros regimenes de tenencia, sin filtrar por compra, es un 32%.</p></li>
<li><p>Otro pariente. En la mayoría de los casos el familiar es número 3, seguido de 4. En un 51% de casos no hay parientes. Es más alto que en 2011.</p></li>
<li><p>Condición dentro del núcleo. La mayoría 58,5% viven en pareja. Hay el doble de personas que viven solas, que en 2011, un 36,6%. Hay también más madres solteras, pero igual padres solteros.</p></li>
<li><p>Estructura del hogar. La mayoría de hogares son familias en pareja con hijos (30,2%), pero menos que en 2011 (44,8%). Continúan en empate pareja sin hijos 19,6% y otro tipo de hogar, pero ha aumentado mucho más este otro tipo de hogar en 2021.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Edad</span></span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(compra21_r<span class="sc">$</span>VAREDAD)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 30.70402</code></pre>
</div>
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">prop.table</span>(<span class="fu">table</span>(compra21_r<span class="sc">$</span>VAREDAD)), <span class="at">digits =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
   19    20    21    22    23    24    25    26    27    28    29    30    31 
0.003 0.006 0.010 0.013 0.019 0.025 0.031 0.039 0.048 0.059 0.070 0.082 0.094 
   32    33    34    35 
0.105 0.118 0.132 0.147 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Número de orden</span></span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">prop.table</span>(<span class="fu">table</span>(compra21_r<span class="sc">$</span>NORDEN)), <span class="at">digits =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
   01    02    03    04    05    06    07    08    09    10    11    12    13 
0.373 0.444 0.115 0.046 0.014 0.005 0.002 0.001 0.000 0.000 0.000 0.000 0.000 
   14    15    16    17    18    19    20 
0.000 0.000 0.000 0.000 0.000 0.000 0.000 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a>(<span class="fu">table</span>(compra21_r<span class="sc">$</span>NORDEN))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
   01    02    03    04    05    06    07    08    09    10    11    12    13 
65173 77509 20026  7947  2481   850   327   135    67    36    27    13    10 
   14    15    16    17    18    19    20 
   12     5     3     1     2     3     3 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a>raros <span class="ot">&lt;-</span> compra21_r <span class="sc">|&gt;</span> </span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">NORDEN =</span> <span class="fu">as.numeric</span>(NORDEN)) <span class="sc">|&gt;</span> </span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(NORDEN <span class="sc">&gt;</span> <span class="dv">05</span>)</span>
<span id="cb110-4"><a href="#cb110-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-5"><a href="#cb110-5" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(raros<span class="sc">$</span>LTRAB <span class="sc">==</span> <span class="st">" "</span>) <span class="sc">*</span> <span class="dv">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 54.61847</code></pre>
</div>
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(compra21_r<span class="sc">$</span>LTRAB <span class="sc">==</span> <span class="st">" "</span>) <span class="sc">*</span> <span class="dv">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 29.14562</code></pre>
</div>
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Otro pariente</span></span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">prop.table</span>(<span class="fu">table</span>(compra21_r<span class="sc">$</span>NORDEN_OPA)), <span class="at">digits =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
         01    02    03    04    05    06    07    08    09    10    11    12 
0.512 0.034 0.046 0.190 0.141 0.045 0.018 0.008 0.003 0.002 0.001 0.000 0.000 
   13    14    15    16    17    18    19    21    22    23    24    25    26 
0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 
   27 
0.000 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Trabajo</span></span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="fu">is.na</span>(compra11_r<span class="sc">$</span>LTRABA)) <span class="sc">*</span> <span class="dv">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 23.74015</code></pre>
</div>
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">prop.table</span>(<span class="fu">table</span>(compra11_r<span class="sc">$</span>LTRABA)), <span class="at">digits =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    1     2     3     4     5 
0.091 0.086 0.366 0.455 0.003 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Año de llegada a la vivienda</span></span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Habría que transofrmar la variable</span></span>
<span id="cb120-3"><a href="#cb120-3" aria-hidden="true" tabindex="-1"></a>compra21_r<span class="sc">$</span>VARANORES_r <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(compra21_r<span class="sc">$</span>VARANORES_r)</span>
<span id="cb120-4"><a href="#cb120-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-5"><a href="#cb120-5" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(compra21_r<span class="sc">$</span>VARANORES_r)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2017.306</code></pre>
</div>
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">prop.table</span>(<span class="fu">table</span>(compra21_r<span class="sc">$</span>ANORES)), <span class="at">digits =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>numeric(0)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Condición dentro del núcleo</span></span>
<span id="cb124-2"><a href="#cb124-2" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">prop.table</span>(<span class="fu">table</span>(compra21_r<span class="sc">$</span>TIPOPER)), <span class="at">digits =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    C     M     N     P 
0.585 0.043 0.366 0.006 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Estructura del hogar</span></span>
<span id="cb126-2"><a href="#cb126-2" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">prop.table</span>(<span class="fu">table</span>(compra21_r<span class="sc">$</span>ESTRUC_HOG)), <span class="at">digits =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    1     2     5     7     8    10    11 
0.058 0.082 0.034 0.196 0.302 0.132 0.196 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb128"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Provincias</span></span>
<span id="cb128-2"><a href="#cb128-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">sort</span>(<span class="fu">prop.table</span>(<span class="fu">table</span>(compra21_r<span class="sc">$</span>PROV_LITERAL)), <span class="at">decreasing =</span> <span class="cn">TRUE</span>), <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
           Madrid         Barcelona Valencia/València 
       0.12801924        0.10324114        0.05488175 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(<span class="fu">sort</span>(<span class="fu">prop.table</span>(<span class="fu">table</span>(compra21_r<span class="sc">$</span>PROV_LITERAL)), <span class="at">decreasing =</span> <span class="cn">TRUE</span>), <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Melilla       Soria       Ceuta 
0.001946974 0.001780908 0.001769455 </code></pre>
</div>
</div>
</section>
</section>
<section id="dónde-compran-en-2011" class="level2">
<h2 class="anchored" data-anchor-id="dónde-compran-en-2011">Dónde compran en 2011</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Por municipio</span></span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a>compra11 <span class="ot">&lt;-</span> compra11 <span class="sc">|&gt;</span> </span>
<span id="cb132-3"><a href="#cb132-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(cusec) <span class="sc">|&gt;</span> </span>
<span id="cb132-4"><a href="#cb132-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb132-5"><a href="#cb132-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">Compra11Mun =</span> <span class="fu">round</span>((<span class="fu">sum</span>(TENEN_VIV <span class="sc">==</span> <span class="st">"Compra"</span>) <span class="sc">/</span> <span class="fu">n</span>()) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>),</span>
<span id="cb132-6"><a href="#cb132-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">Herencia11Mun =</span> <span class="fu">round</span>((<span class="fu">sum</span>(TENEN_VIV <span class="sc">==</span> <span class="st">"Herencia o donación"</span>) <span class="sc">/</span> <span class="fu">n</span>()) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>),</span>
<span id="cb132-7"><a href="#cb132-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">Alquiler11Mun =</span> <span class="fu">round</span>((<span class="fu">sum</span>(TENEN_VIV <span class="sc">==</span> <span class="st">"Alquiler"</span>) <span class="sc">/</span> <span class="fu">n</span>()) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>),</span>
<span id="cb132-8"><a href="#cb132-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">Otro11Mun =</span> <span class="fu">round</span>((<span class="fu">sum</span>(TENEN_VIV <span class="sc">==</span> <span class="st">"Otro"</span>) <span class="sc">/</span> <span class="fu">n</span>()) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb132-9"><a href="#cb132-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb132-10"><a href="#cb132-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-11"><a href="#cb132-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Por provincia</span></span>
<span id="cb132-12"><a href="#cb132-12" aria-hidden="true" tabindex="-1"></a>compra11 <span class="ot">&lt;-</span> compra11 <span class="sc">|&gt;</span> </span>
<span id="cb132-13"><a href="#cb132-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(CPRO) <span class="sc">|&gt;</span> </span>
<span id="cb132-14"><a href="#cb132-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb132-15"><a href="#cb132-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">Compra11Prov =</span> <span class="fu">round</span>((<span class="fu">sum</span>(TENEN_VIV <span class="sc">==</span> <span class="st">"Compra"</span>) <span class="sc">/</span> <span class="fu">n</span>()) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>),</span>
<span id="cb132-16"><a href="#cb132-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">Herencia11Prov =</span> <span class="fu">round</span>((<span class="fu">sum</span>(TENEN_VIV <span class="sc">==</span> <span class="st">"Herencia o donación"</span>) <span class="sc">/</span> <span class="fu">n</span>()) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>),</span>
<span id="cb132-17"><a href="#cb132-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">Alquiler11Prov =</span> <span class="fu">round</span>((<span class="fu">sum</span>(TENEN_VIV <span class="sc">==</span> <span class="st">"Alquiler"</span>) <span class="sc">/</span> <span class="fu">n</span>()) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>),</span>
<span id="cb132-18"><a href="#cb132-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">Otro11Prov =</span> <span class="fu">round</span>((<span class="fu">sum</span>(TENEN_VIV <span class="sc">==</span> <span class="st">"Otro"</span>) <span class="sc">/</span> <span class="fu">n</span>()) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>)) <span class="sc">|&gt;</span>   <span class="fu">ungroup</span>()</span>
<span id="cb132-19"><a href="#cb132-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-20"><a href="#cb132-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-21"><a href="#cb132-21" aria-hidden="true" tabindex="-1"></a>compra11 <span class="sc">|&gt;</span> </span>
<span id="cb132-22"><a href="#cb132-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">distinct</span>(cusec, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb132-23"><a href="#cb132-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Compra11Mun)) <span class="sc">|&gt;</span> </span>
<span id="cb132-24"><a href="#cb132-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(Compra11Mun, MUN_LITERAL, PROV_LITERAL, cusec)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 588 × 4
   Compra11Mun MUN_LITERAL          PROV_LITERAL      cusec
         &lt;dbl&gt; &lt;chr&gt;                &lt;chr&gt;             &lt;chr&gt;
 1        92.7 2001 &lt;= 5000         Zamora            49992
 2        90.4 Arroyomolinos        Madrid            28015
 3        90.1 Petrer               Alicante/Alacant  03104
 4        89.7 Almansa              Albacete          02009
 5        89.6 Alcalá de Guadaíra   Sevilla           41004
 6        89.4 Martos               Jaén              23060
 7        89.2 Dos Hermanas         Sevilla           41038
 8        88.9 Paiporta             Valencia/València 46186
 9        88.4 Ibi                  Alicante/Alacant  03079
10        88.1 Morón de la Frontera Sevilla           41065
# ℹ 578 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a>compra11 <span class="sc">|&gt;</span> </span>
<span id="cb134-2"><a href="#cb134-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">distinct</span>(cusec, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb134-3"><a href="#cb134-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Herencia11Mun)) <span class="sc">|&gt;</span> </span>
<span id="cb134-4"><a href="#cb134-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(Herencia11Mun, MUN_LITERAL, PROV_LITERAL, cusec)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 588 × 4
   Herencia11Mun MUN_LITERAL  PROV_LITERAL           cusec
           &lt;dbl&gt; &lt;chr&gt;        &lt;chr&gt;                  &lt;chr&gt;
 1          34.5 2001 &lt;= 5000 Palmas, Las            35992
 2          28.6 &lt;=2000       Palmas, Las            35991
 3          26.5 &lt;=2000       Pontevedra             36991
 4          25.3 &lt;=2000       Lugo                   27991
 5          21.7 &lt;=2000       Santa Cruz de Tenerife 38991
 6          19.0 &lt;=2000       Ourense                32991
 7          17.3 2001 &lt;= 5000 Coruña, A              15992
 8          16.4 &lt;=2000       Coruña, A              15991
 9          16.3 Redondela    Pontevedra             36045
10          16.2 2001 &lt;= 5000 Lugo                   27992
# ℹ 578 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a>compra11 <span class="sc">|&gt;</span> </span>
<span id="cb136-2"><a href="#cb136-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">distinct</span>(CPRO, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb136-3"><a href="#cb136-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(Compra11Prov)) <span class="sc">|&gt;</span> </span>
<span id="cb136-4"><a href="#cb136-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(Compra11Prov, PROV_LITERAL)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 52 × 2
   Compra11Prov PROV_LITERAL     
          &lt;dbl&gt; &lt;chr&gt;            
 1         76.6 Cádiz            
 2         76.2 Alicante/Alacant 
 3         74.9 Araba/Álava      
 4         74.3 Cantabria        
 5         74.2 Gipuzkoa         
 6         74.2 Valencia/València
 7         74.1 Sevilla          
 8         73.4 Burgos           
 9         73.3 Córdoba          
10         73.2 Valladolid       
# ℹ 42 more rows</code></pre>
</div>
</div>
<section id="mapa-por-provincias-1" class="level3">
<h3 class="anchored" data-anchor-id="mapa-por-provincias-1">Mapa por provincias</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb138"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mapSpain)</span>
<span id="cb138-2"><a href="#cb138-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb138-3"><a href="#cb138-3" aria-hidden="true" tabindex="-1"></a>esp_can <span class="ot">&lt;-</span> <span class="fu">esp_get_country</span>() </span>
<span id="cb138-4"><a href="#cb138-4" aria-hidden="true" tabindex="-1"></a>can_prov <span class="ot">&lt;-</span> <span class="fu">esp_get_can_provinces</span>()</span>
<span id="cb138-5"><a href="#cb138-5" aria-hidden="true" tabindex="-1"></a>can_box <span class="ot">&lt;-</span> <span class="fu">esp_get_can_box</span>() </span>
<span id="cb138-6"><a href="#cb138-6" aria-hidden="true" tabindex="-1"></a>munic <span class="ot">&lt;-</span> <span class="fu">esp_get_munic</span>() </span>
<span id="cb138-7"><a href="#cb138-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-8"><a href="#cb138-8" aria-hidden="true" tabindex="-1"></a>provic <span class="ot">&lt;-</span> <span class="fu">esp_get_prov</span>() <span class="sc">|&gt;</span> </span>
<span id="cb138-9"><a href="#cb138-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">CPRO =</span> cpro)</span>
<span id="cb138-10"><a href="#cb138-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-11"><a href="#cb138-11" aria-hidden="true" tabindex="-1"></a>mapa <span class="ot">&lt;-</span> compra11 <span class="sc">|&gt;</span> </span>
<span id="cb138-12"><a href="#cb138-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(CPRO, Compra11Prov) <span class="sc">|&gt;</span> </span>
<span id="cb138-13"><a href="#cb138-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(CPRO, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb138-14"><a href="#cb138-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-15"><a href="#cb138-15" aria-hidden="true" tabindex="-1"></a>mapa <span class="ot">&lt;-</span> provic <span class="sc">|&gt;</span> </span>
<span id="cb138-16"><a href="#cb138-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(mapa, <span class="at">by =</span> <span class="st">"CPRO"</span>)</span>
<span id="cb138-17"><a href="#cb138-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-18"><a href="#cb138-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Compra</span></span>
<span id="cb138-19"><a href="#cb138-19" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(esp_can) <span class="sc">+</span></span>
<span id="cb138-20"><a href="#cb138-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>() <span class="sc">+</span></span>
<span id="cb138-21"><a href="#cb138-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> can_prov) <span class="sc">+</span></span>
<span id="cb138-22"><a href="#cb138-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> can_box) <span class="sc">+</span> </span>
<span id="cb138-23"><a href="#cb138-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> mapa, <span class="fu">aes</span>(<span class="at">fill =</span> Compra11Prov), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb138-24"><a href="#cb138-24" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_sf_text</span>(<span class="at">data =</span> mapa, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">round</span>(Compra11Prov, <span class="dv">1</span>)), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="fl">2.5</span>, <span class="at">check_overlap =</span> <span class="cn">TRUE</span>, <span class="at">nudge_y =</span> <span class="fl">0.1</span>) <span class="sc">+</span>  <span class="co"># Agregar etiquetas</span></span>
<span id="cb138-25"><a href="#cb138-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span>  </span>
<span id="cb138-26"><a href="#cb138-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Porcentaje de compra por provincia 2011"</span>) <span class="sc">+</span>  </span>
<span id="cb138-27"><a href="#cb138-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="fu">c</span>(<span class="fl">0.18</span>, <span class="fl">0.55</span>),    </span>
<span id="cb138-28"><a href="#cb138-28" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.justification =</span> <span class="st">"center"</span>,   </span>
<span id="cb138-29"><a href="#cb138-29" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="cn">NULL</span>, <span class="at">colour =</span> <span class="st">"black"</span>),</span>
<span id="cb138-30"><a href="#cb138-30" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.margin =</span> <span class="fu">margin</span>(<span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">6</span>)) <span class="sc">+</span> </span>
<span id="cb138-31"><a href="#cb138-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">ncol =</span> <span class="dv">2</span>)) <span class="sc">+</span> </span>
<span id="cb138-32"><a href="#cb138-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>() <span class="sc">+</span></span>
<span id="cb138-33"><a href="#cb138-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>(<span class="at">option =</span> <span class="st">"C"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb138-34"><a href="#cb138-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-35"><a href="#cb138-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Herencia o donación</span></span>
<span id="cb138-36"><a href="#cb138-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-37"><a href="#cb138-37" aria-hidden="true" tabindex="-1"></a>mapa <span class="ot">&lt;-</span> compra11 <span class="sc">|&gt;</span> </span>
<span id="cb138-38"><a href="#cb138-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(CPRO, Herencia11Prov) <span class="sc">|&gt;</span> </span>
<span id="cb138-39"><a href="#cb138-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(CPRO, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb138-40"><a href="#cb138-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-41"><a href="#cb138-41" aria-hidden="true" tabindex="-1"></a>mapa <span class="ot">&lt;-</span> provic <span class="sc">|&gt;</span> </span>
<span id="cb138-42"><a href="#cb138-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(mapa, <span class="at">by =</span> <span class="st">"CPRO"</span>)</span>
<span id="cb138-43"><a href="#cb138-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-44"><a href="#cb138-44" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(esp_can) <span class="sc">+</span></span>
<span id="cb138-45"><a href="#cb138-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>() <span class="sc">+</span></span>
<span id="cb138-46"><a href="#cb138-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> can_prov) <span class="sc">+</span></span>
<span id="cb138-47"><a href="#cb138-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> can_box) <span class="sc">+</span> </span>
<span id="cb138-48"><a href="#cb138-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> mapa, <span class="fu">aes</span>(<span class="at">fill =</span> Herencia11Prov), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb138-49"><a href="#cb138-49" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_sf_text</span>(<span class="at">data =</span> mapa, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">round</span>(Herencia11Prov, <span class="dv">1</span>)), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="fl">2.5</span>, <span class="at">check_overlap =</span> <span class="cn">TRUE</span>, <span class="at">nudge_y =</span> <span class="fl">0.1</span>) <span class="sc">+</span>  <span class="co"># Agregar etiquetas</span></span>
<span id="cb138-50"><a href="#cb138-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span>  </span>
<span id="cb138-51"><a href="#cb138-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Porcentaje de herencia/donación por provincia 2011"</span>) <span class="sc">+</span>  </span>
<span id="cb138-52"><a href="#cb138-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="fu">c</span>(<span class="fl">0.18</span>, <span class="fl">0.55</span>),    </span>
<span id="cb138-53"><a href="#cb138-53" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.justification =</span> <span class="st">"center"</span>,   </span>
<span id="cb138-54"><a href="#cb138-54" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="cn">NULL</span>, <span class="at">colour =</span> <span class="st">"black"</span>),</span>
<span id="cb138-55"><a href="#cb138-55" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.margin =</span> <span class="fu">margin</span>(<span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">6</span>)) <span class="sc">+</span> </span>
<span id="cb138-56"><a href="#cb138-56" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">ncol =</span> <span class="dv">2</span>)) <span class="sc">+</span> </span>
<span id="cb138-57"><a href="#cb138-57" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>() <span class="sc">+</span></span>
<span id="cb138-58"><a href="#cb138-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>(<span class="at">option =</span> <span class="st">"C"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb138-59"><a href="#cb138-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-60"><a href="#cb138-60" aria-hidden="true" tabindex="-1"></a><span class="co"># Alquiler</span></span>
<span id="cb138-61"><a href="#cb138-61" aria-hidden="true" tabindex="-1"></a>mapa <span class="ot">&lt;-</span> compra11 <span class="sc">|&gt;</span> </span>
<span id="cb138-62"><a href="#cb138-62" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(CPRO, Alquiler11Prov) <span class="sc">|&gt;</span> </span>
<span id="cb138-63"><a href="#cb138-63" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(CPRO, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb138-64"><a href="#cb138-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-65"><a href="#cb138-65" aria-hidden="true" tabindex="-1"></a>mapa <span class="ot">&lt;-</span> provic <span class="sc">|&gt;</span> </span>
<span id="cb138-66"><a href="#cb138-66" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(mapa, <span class="at">by =</span> <span class="st">"CPRO"</span>)</span>
<span id="cb138-67"><a href="#cb138-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-68"><a href="#cb138-68" aria-hidden="true" tabindex="-1"></a>p3 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(esp_can) <span class="sc">+</span></span>
<span id="cb138-69"><a href="#cb138-69" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>() <span class="sc">+</span></span>
<span id="cb138-70"><a href="#cb138-70" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> can_prov) <span class="sc">+</span></span>
<span id="cb138-71"><a href="#cb138-71" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> can_box) <span class="sc">+</span> </span>
<span id="cb138-72"><a href="#cb138-72" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> mapa, <span class="fu">aes</span>(<span class="at">fill =</span> Alquiler11Prov), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb138-73"><a href="#cb138-73" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_sf_text</span>(<span class="at">data =</span> mapa, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">round</span>(Alquiler11Prov, <span class="dv">1</span>)), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="fl">2.5</span>, <span class="at">check_overlap =</span> <span class="cn">TRUE</span>, <span class="at">nudge_y =</span> <span class="fl">0.1</span>) <span class="sc">+</span>  <span class="co"># Agregar etiquetas</span></span>
<span id="cb138-74"><a href="#cb138-74" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span>  </span>
<span id="cb138-75"><a href="#cb138-75" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Porcentaje de alquiler por provincia 2011"</span>) <span class="sc">+</span>  </span>
<span id="cb138-76"><a href="#cb138-76" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="fu">c</span>(<span class="fl">0.18</span>, <span class="fl">0.55</span>),    </span>
<span id="cb138-77"><a href="#cb138-77" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.justification =</span> <span class="st">"center"</span>,   </span>
<span id="cb138-78"><a href="#cb138-78" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="cn">NULL</span>, <span class="at">colour =</span> <span class="st">"black"</span>),</span>
<span id="cb138-79"><a href="#cb138-79" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.margin =</span> <span class="fu">margin</span>(<span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">6</span>)) <span class="sc">+</span> </span>
<span id="cb138-80"><a href="#cb138-80" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">ncol =</span> <span class="dv">2</span>)) <span class="sc">+</span> </span>
<span id="cb138-81"><a href="#cb138-81" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>() <span class="sc">+</span></span>
<span id="cb138-82"><a href="#cb138-82" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>(<span class="at">option =</span> <span class="st">"C"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb138-83"><a href="#cb138-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-84"><a href="#cb138-84" aria-hidden="true" tabindex="-1"></a><span class="co"># Otro</span></span>
<span id="cb138-85"><a href="#cb138-85" aria-hidden="true" tabindex="-1"></a>mapa <span class="ot">&lt;-</span> compra11 <span class="sc">|&gt;</span> </span>
<span id="cb138-86"><a href="#cb138-86" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(CPRO, Otro11Prov) <span class="sc">|&gt;</span> </span>
<span id="cb138-87"><a href="#cb138-87" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(CPRO, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb138-88"><a href="#cb138-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-89"><a href="#cb138-89" aria-hidden="true" tabindex="-1"></a>mapa <span class="ot">&lt;-</span> provic <span class="sc">|&gt;</span> </span>
<span id="cb138-90"><a href="#cb138-90" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(mapa, <span class="at">by =</span> <span class="st">"CPRO"</span>)</span>
<span id="cb138-91"><a href="#cb138-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-92"><a href="#cb138-92" aria-hidden="true" tabindex="-1"></a>p4 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(esp_can) <span class="sc">+</span></span>
<span id="cb138-93"><a href="#cb138-93" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>() <span class="sc">+</span></span>
<span id="cb138-94"><a href="#cb138-94" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> can_prov) <span class="sc">+</span></span>
<span id="cb138-95"><a href="#cb138-95" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> can_box) <span class="sc">+</span> </span>
<span id="cb138-96"><a href="#cb138-96" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> mapa, <span class="fu">aes</span>(<span class="at">fill =</span> Otro11Prov), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb138-97"><a href="#cb138-97" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_sf_text</span>(<span class="at">data =</span> mapa, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">round</span>(Otro11Prov, <span class="dv">1</span>)), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="fl">2.5</span>, <span class="at">check_overlap =</span> <span class="cn">TRUE</span>, <span class="at">nudge_y =</span> <span class="fl">0.1</span>) <span class="sc">+</span>  <span class="co"># Agregar etiquetas</span></span>
<span id="cb138-98"><a href="#cb138-98" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span>  </span>
<span id="cb138-99"><a href="#cb138-99" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Porcentaje de otro por provincia 2011"</span>) <span class="sc">+</span>  </span>
<span id="cb138-100"><a href="#cb138-100" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="fu">c</span>(<span class="fl">0.18</span>, <span class="fl">0.55</span>),    </span>
<span id="cb138-101"><a href="#cb138-101" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.justification =</span> <span class="st">"center"</span>,   </span>
<span id="cb138-102"><a href="#cb138-102" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="cn">NULL</span>, <span class="at">colour =</span> <span class="st">"black"</span>),</span>
<span id="cb138-103"><a href="#cb138-103" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.margin =</span> <span class="fu">margin</span>(<span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">6</span>)) <span class="sc">+</span> </span>
<span id="cb138-104"><a href="#cb138-104" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">ncol =</span> <span class="dv">2</span>)) <span class="sc">+</span> </span>
<span id="cb138-105"><a href="#cb138-105" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>() <span class="sc">+</span></span>
<span id="cb138-106"><a href="#cb138-106" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>(<span class="at">option =</span> <span class="st">"C"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb138-107"><a href="#cb138-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-108"><a href="#cb138-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-109"><a href="#cb138-109" aria-hidden="true" tabindex="-1"></a><span class="fu">ggarrange</span>(p1, p2, p3, p4, <span class="at">ncol=</span><span class="dv">2</span>, <span class="at">nrow =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in st_point_on_surface.sfc(sf::st_zm(x)): st_point_on_surface may not
give correct results for longitude/latitude data

Warning in st_point_on_surface.sfc(sf::st_zm(x)): st_point_on_surface may not
give correct results for longitude/latitude data

Warning in st_point_on_surface.sfc(sf::st_zm(x)): st_point_on_surface may not
give correct results for longitude/latitude data

Warning in st_point_on_surface.sfc(sf::st_zm(x)): st_point_on_surface may not
give correct results for longitude/latitude data</code></pre>
</div>
<div class="cell-output-display">
<p><img src="Jovenes_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
</section>
</section>
<section id="dónde-compran-en-2021" class="level2">
<h2 class="anchored" data-anchor-id="dónde-compran-en-2021">Dónde compran en 2021</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb140"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Por municipio</span></span>
<span id="cb140-2"><a href="#cb140-2" aria-hidden="true" tabindex="-1"></a>compra21 <span class="ot">&lt;-</span> compra21 <span class="sc">|&gt;</span> </span>
<span id="cb140-3"><a href="#cb140-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(cusec) <span class="sc">|&gt;</span> </span>
<span id="cb140-4"><a href="#cb140-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb140-5"><a href="#cb140-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">Propiedad21Mun =</span> <span class="fu">round</span>((<span class="fu">sum</span>(TENEN_VIV <span class="sc">==</span> <span class="st">"Propiedad"</span>) <span class="sc">/</span> <span class="fu">n</span>()) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>),</span>
<span id="cb140-6"><a href="#cb140-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">Alquiler21Mun =</span> <span class="fu">round</span>((<span class="fu">sum</span>(TENEN_VIV <span class="sc">==</span> <span class="st">"Alquiler"</span>) <span class="sc">/</span> <span class="fu">n</span>()) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>),</span>
<span id="cb140-7"><a href="#cb140-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">Otro21Mun =</span> <span class="fu">round</span>((<span class="fu">sum</span>(TENEN_VIV <span class="sc">==</span> <span class="st">"Otro"</span>) <span class="sc">/</span> <span class="fu">n</span>()) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb140-8"><a href="#cb140-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb140-9"><a href="#cb140-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-10"><a href="#cb140-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Por provincia</span></span>
<span id="cb140-11"><a href="#cb140-11" aria-hidden="true" tabindex="-1"></a>compra21 <span class="ot">&lt;-</span> compra21 <span class="sc">|&gt;</span> </span>
<span id="cb140-12"><a href="#cb140-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(CPRO) <span class="sc">|&gt;</span> </span>
<span id="cb140-13"><a href="#cb140-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb140-14"><a href="#cb140-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">Propiedad21Prov =</span> <span class="fu">round</span>((<span class="fu">sum</span>(TENEN_VIV <span class="sc">==</span> <span class="st">"Propiedad"</span>) <span class="sc">/</span> <span class="fu">n</span>()) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>),</span>
<span id="cb140-15"><a href="#cb140-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">Alquiler21Prov =</span> <span class="fu">round</span>((<span class="fu">sum</span>(TENEN_VIV <span class="sc">==</span> <span class="st">"Alquiler"</span>) <span class="sc">/</span> <span class="fu">n</span>()) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>),</span>
<span id="cb140-16"><a href="#cb140-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">Otro21Prov =</span> <span class="fu">round</span>((<span class="fu">sum</span>(TENEN_VIV <span class="sc">==</span> <span class="st">"Otro"</span>) <span class="sc">/</span> <span class="fu">n</span>()) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>)) <span class="sc">|&gt;</span>   <span class="fu">ungroup</span>()</span>
<span id="cb140-17"><a href="#cb140-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-18"><a href="#cb140-18" aria-hidden="true" tabindex="-1"></a>compra21 <span class="sc">|&gt;</span> </span>
<span id="cb140-19"><a href="#cb140-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">distinct</span>(cusec, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb140-20"><a href="#cb140-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Propiedad21Mun)) <span class="sc">|&gt;</span> </span>
<span id="cb140-21"><a href="#cb140-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(Propiedad21Mun, MUN_LITERAL, PROV_LITERAL, cusec)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 909 × 4
   Propiedad21Mun MUN_LITERAL       PROV_LITERAL cusec
            &lt;dbl&gt; &lt;chr&gt;             &lt;chr&gt;        &lt;chr&gt;
 1           91.3 Martos            Jaén         23060
 2           86.8 Andújar           Jaén         23005
 3           86.8 Campo de Criptana Ciudad Real  13028
 4           85.7 5001 &lt;= 10000     Burgos       09993
 5           85.6 2001 &lt;= 5000      Salamanca    37992
 6           85.1 Calasparra        Murcia       30013
 7           84.5 Aljaraque         Huelva       21002
 8           84.2 Jódar             Jaén         23053
 9           83.7 Carballiño, O     Ourense      32019
10           82.9 Torre del Campo   Jaén         23086
# ℹ 899 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb142"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a>compra21 <span class="sc">|&gt;</span> </span>
<span id="cb142-2"><a href="#cb142-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">distinct</span>(CPRO, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb142-3"><a href="#cb142-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(Propiedad21Prov)) <span class="sc">|&gt;</span> </span>
<span id="cb142-4"><a href="#cb142-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(Propiedad21Prov, PROV_LITERAL)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 52 × 2
   Propiedad21Prov PROV_LITERAL
             &lt;dbl&gt; &lt;chr&gt;       
 1            77.1 Jaén        
 2            69.5 Málaga      
 3            69.0 Córdoba     
 4            68.4 Cádiz       
 5            68.2 Ciudad Real 
 6            68.1 Sevilla     
 7            67.6 Huelva      
 8            65.9 Murcia      
 9            65.8 Albacete    
10            64.6 Badajoz     
# ℹ 42 more rows</code></pre>
</div>
</div>
<section id="mapa-por-provincias-2" class="level3">
<h3 class="anchored" data-anchor-id="mapa-por-provincias-2">Mapa por provincias</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb144"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mapSpain)</span>
<span id="cb144-2"><a href="#cb144-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb144-3"><a href="#cb144-3" aria-hidden="true" tabindex="-1"></a>esp_can <span class="ot">&lt;-</span> <span class="fu">esp_get_country</span>() </span>
<span id="cb144-4"><a href="#cb144-4" aria-hidden="true" tabindex="-1"></a>can_prov <span class="ot">&lt;-</span> <span class="fu">esp_get_can_provinces</span>()</span>
<span id="cb144-5"><a href="#cb144-5" aria-hidden="true" tabindex="-1"></a>can_box <span class="ot">&lt;-</span> <span class="fu">esp_get_can_box</span>() </span>
<span id="cb144-6"><a href="#cb144-6" aria-hidden="true" tabindex="-1"></a>munic <span class="ot">&lt;-</span> <span class="fu">esp_get_munic</span>() </span>
<span id="cb144-7"><a href="#cb144-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb144-8"><a href="#cb144-8" aria-hidden="true" tabindex="-1"></a>provic <span class="ot">&lt;-</span> <span class="fu">esp_get_prov</span>() <span class="sc">|&gt;</span> </span>
<span id="cb144-9"><a href="#cb144-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">CPRO =</span> cpro)</span>
<span id="cb144-10"><a href="#cb144-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb144-11"><a href="#cb144-11" aria-hidden="true" tabindex="-1"></a>mapa <span class="ot">&lt;-</span> compra21 <span class="sc">|&gt;</span> </span>
<span id="cb144-12"><a href="#cb144-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(CPRO, Propiedad21Prov) <span class="sc">|&gt;</span> </span>
<span id="cb144-13"><a href="#cb144-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(CPRO, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb144-14"><a href="#cb144-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb144-15"><a href="#cb144-15" aria-hidden="true" tabindex="-1"></a>mapa <span class="ot">&lt;-</span> provic <span class="sc">|&gt;</span> </span>
<span id="cb144-16"><a href="#cb144-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(mapa, <span class="at">by =</span> <span class="st">"CPRO"</span>)</span>
<span id="cb144-17"><a href="#cb144-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb144-18"><a href="#cb144-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Compra</span></span>
<span id="cb144-19"><a href="#cb144-19" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(esp_can) <span class="sc">+</span></span>
<span id="cb144-20"><a href="#cb144-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>() <span class="sc">+</span></span>
<span id="cb144-21"><a href="#cb144-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> can_prov) <span class="sc">+</span></span>
<span id="cb144-22"><a href="#cb144-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> can_box) <span class="sc">+</span> </span>
<span id="cb144-23"><a href="#cb144-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> mapa, <span class="fu">aes</span>(<span class="at">fill =</span> Propiedad21Prov), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb144-24"><a href="#cb144-24" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_sf_text</span>(<span class="at">data =</span> mapa, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">round</span>(Propiedad21Prov, <span class="dv">1</span>)), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="fl">2.5</span>, <span class="at">check_overlap =</span> <span class="cn">TRUE</span>, <span class="at">nudge_y =</span> <span class="fl">0.1</span>) <span class="sc">+</span>  <span class="co"># Agregar etiquetas</span></span>
<span id="cb144-25"><a href="#cb144-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span>  </span>
<span id="cb144-26"><a href="#cb144-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Porcentaje de propiedad por provincia 2021"</span>) <span class="sc">+</span>  </span>
<span id="cb144-27"><a href="#cb144-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="fu">c</span>(<span class="fl">0.18</span>, <span class="fl">0.55</span>),    </span>
<span id="cb144-28"><a href="#cb144-28" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.justification =</span> <span class="st">"center"</span>,   </span>
<span id="cb144-29"><a href="#cb144-29" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="cn">NULL</span>, <span class="at">colour =</span> <span class="st">"black"</span>),</span>
<span id="cb144-30"><a href="#cb144-30" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.margin =</span> <span class="fu">margin</span>(<span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">6</span>)) <span class="sc">+</span> </span>
<span id="cb144-31"><a href="#cb144-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">ncol =</span> <span class="dv">2</span>)) <span class="sc">+</span> </span>
<span id="cb144-32"><a href="#cb144-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>() <span class="sc">+</span></span>
<span id="cb144-33"><a href="#cb144-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>(<span class="at">option =</span> <span class="st">"C"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb144-34"><a href="#cb144-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb144-35"><a href="#cb144-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb144-36"><a href="#cb144-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Alquiler</span></span>
<span id="cb144-37"><a href="#cb144-37" aria-hidden="true" tabindex="-1"></a>mapa <span class="ot">&lt;-</span> compra21 <span class="sc">|&gt;</span> </span>
<span id="cb144-38"><a href="#cb144-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(CPRO, Alquiler21Prov) <span class="sc">|&gt;</span> </span>
<span id="cb144-39"><a href="#cb144-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(CPRO, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb144-40"><a href="#cb144-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb144-41"><a href="#cb144-41" aria-hidden="true" tabindex="-1"></a>mapa <span class="ot">&lt;-</span> provic <span class="sc">|&gt;</span> </span>
<span id="cb144-42"><a href="#cb144-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(mapa, <span class="at">by =</span> <span class="st">"CPRO"</span>)</span>
<span id="cb144-43"><a href="#cb144-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb144-44"><a href="#cb144-44" aria-hidden="true" tabindex="-1"></a>p3 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(esp_can) <span class="sc">+</span></span>
<span id="cb144-45"><a href="#cb144-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>() <span class="sc">+</span></span>
<span id="cb144-46"><a href="#cb144-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> can_prov) <span class="sc">+</span></span>
<span id="cb144-47"><a href="#cb144-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> can_box) <span class="sc">+</span> </span>
<span id="cb144-48"><a href="#cb144-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> mapa, <span class="fu">aes</span>(<span class="at">fill =</span> Alquiler21Prov), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb144-49"><a href="#cb144-49" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_sf_text</span>(<span class="at">data =</span> mapa, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">round</span>(Alquiler21Prov, <span class="dv">1</span>)), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="fl">2.5</span>, <span class="at">check_overlap =</span> <span class="cn">TRUE</span>, <span class="at">nudge_y =</span> <span class="fl">0.1</span>) <span class="sc">+</span>  <span class="co"># Agregar etiquetas</span></span>
<span id="cb144-50"><a href="#cb144-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span>  </span>
<span id="cb144-51"><a href="#cb144-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Porcentaje de alquiler por provincia 2021"</span>) <span class="sc">+</span>  </span>
<span id="cb144-52"><a href="#cb144-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="fu">c</span>(<span class="fl">0.18</span>, <span class="fl">0.55</span>),    </span>
<span id="cb144-53"><a href="#cb144-53" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.justification =</span> <span class="st">"center"</span>,   </span>
<span id="cb144-54"><a href="#cb144-54" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="cn">NULL</span>, <span class="at">colour =</span> <span class="st">"black"</span>),</span>
<span id="cb144-55"><a href="#cb144-55" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.margin =</span> <span class="fu">margin</span>(<span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">6</span>)) <span class="sc">+</span> </span>
<span id="cb144-56"><a href="#cb144-56" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">ncol =</span> <span class="dv">2</span>)) <span class="sc">+</span> </span>
<span id="cb144-57"><a href="#cb144-57" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>() <span class="sc">+</span></span>
<span id="cb144-58"><a href="#cb144-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>(<span class="at">option =</span> <span class="st">"C"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb144-59"><a href="#cb144-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb144-60"><a href="#cb144-60" aria-hidden="true" tabindex="-1"></a><span class="co"># Otro</span></span>
<span id="cb144-61"><a href="#cb144-61" aria-hidden="true" tabindex="-1"></a>mapa <span class="ot">&lt;-</span> compra21 <span class="sc">|&gt;</span> </span>
<span id="cb144-62"><a href="#cb144-62" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(CPRO, Otro21Prov) <span class="sc">|&gt;</span> </span>
<span id="cb144-63"><a href="#cb144-63" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(CPRO, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb144-64"><a href="#cb144-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb144-65"><a href="#cb144-65" aria-hidden="true" tabindex="-1"></a>mapa <span class="ot">&lt;-</span> provic <span class="sc">|&gt;</span> </span>
<span id="cb144-66"><a href="#cb144-66" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(mapa, <span class="at">by =</span> <span class="st">"CPRO"</span>)</span>
<span id="cb144-67"><a href="#cb144-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb144-68"><a href="#cb144-68" aria-hidden="true" tabindex="-1"></a>p4 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(esp_can) <span class="sc">+</span></span>
<span id="cb144-69"><a href="#cb144-69" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>() <span class="sc">+</span></span>
<span id="cb144-70"><a href="#cb144-70" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> can_prov) <span class="sc">+</span></span>
<span id="cb144-71"><a href="#cb144-71" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> can_box) <span class="sc">+</span> </span>
<span id="cb144-72"><a href="#cb144-72" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> mapa, <span class="fu">aes</span>(<span class="at">fill =</span> Otro21Prov), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb144-73"><a href="#cb144-73" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_sf_text</span>(<span class="at">data =</span> mapa, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">round</span>(Otro21Prov, <span class="dv">1</span>)), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="fl">2.5</span>, <span class="at">check_overlap =</span> <span class="cn">TRUE</span>, <span class="at">nudge_y =</span> <span class="fl">0.1</span>) <span class="sc">+</span>  <span class="co"># Agregar etiquetas</span></span>
<span id="cb144-74"><a href="#cb144-74" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span>  </span>
<span id="cb144-75"><a href="#cb144-75" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Porcentaje de otro por provincia 2011"</span>) <span class="sc">+</span>  </span>
<span id="cb144-76"><a href="#cb144-76" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="fu">c</span>(<span class="fl">0.18</span>, <span class="fl">0.55</span>),    </span>
<span id="cb144-77"><a href="#cb144-77" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.justification =</span> <span class="st">"center"</span>,   </span>
<span id="cb144-78"><a href="#cb144-78" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="cn">NULL</span>, <span class="at">colour =</span> <span class="st">"black"</span>),</span>
<span id="cb144-79"><a href="#cb144-79" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.margin =</span> <span class="fu">margin</span>(<span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">6</span>)) <span class="sc">+</span> </span>
<span id="cb144-80"><a href="#cb144-80" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">ncol =</span> <span class="dv">2</span>)) <span class="sc">+</span> </span>
<span id="cb144-81"><a href="#cb144-81" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>() <span class="sc">+</span></span>
<span id="cb144-82"><a href="#cb144-82" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>(<span class="at">option =</span> <span class="st">"C"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb144-83"><a href="#cb144-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb144-84"><a href="#cb144-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb144-85"><a href="#cb144-85" aria-hidden="true" tabindex="-1"></a><span class="fu">ggarrange</span>(p1, p3, p4, <span class="at">ncol=</span><span class="dv">2</span>, <span class="at">nrow =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in st_point_on_surface.sfc(sf::st_zm(x)): st_point_on_surface may not
give correct results for longitude/latitude data

Warning in st_point_on_surface.sfc(sf::st_zm(x)): st_point_on_surface may not
give correct results for longitude/latitude data

Warning in st_point_on_surface.sfc(sf::st_zm(x)): st_point_on_surface may not
give correct results for longitude/latitude data</code></pre>
</div>
<div class="cell-output-display">
<p><img src="Jovenes_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
</section>
</section>
<section id="comparar-la-propiedad-así-con-la-propiedad-sin-los-filtros." class="level2">
<h2 class="anchored" data-anchor-id="comparar-la-propiedad-así-con-la-propiedad-sin-los-filtros.">Comparar la propiedad así con la propiedad sin los filtros.</h2>
<section id="provincias-1" class="level3">
<h3 class="anchored" data-anchor-id="provincias-1">Provincias</h3>
<ul>
<li>2021 con filtro. La provincia</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb146"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Top provincias con más propiedad en 2021</span></span>
<span id="cb146-2"><a href="#cb146-2" aria-hidden="true" tabindex="-1"></a>top_propiedad_2021_filtro <span class="ot">&lt;-</span> compra21 <span class="sc">%&gt;%</span></span>
<span id="cb146-3"><a href="#cb146-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Propiedad21Prov)) <span class="sc">%&gt;%</span></span>
<span id="cb146-4"><a href="#cb146-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(Propiedad21Prov, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb146-5"><a href="#cb146-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Propiedad21Prov, PROV_LITERAL)</span>
<span id="cb146-6"><a href="#cb146-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-7"><a href="#cb146-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-8"><a href="#cb146-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Top provincias con más propiedad en 2021 NO FILTRO</span></span>
<span id="cb146-9"><a href="#cb146-9" aria-hidden="true" tabindex="-1"></a>top_propiedad_2021 <span class="ot">&lt;-</span> jovenes_total <span class="sc">%&gt;%</span></span>
<span id="cb146-10"><a href="#cb146-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Propiedad21Prov)) <span class="sc">%&gt;%</span></span>
<span id="cb146-11"><a href="#cb146-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(Propiedad21Prov, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb146-12"><a href="#cb146-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Propiedad21Prov, PROV_LITERAL)</span>
<span id="cb146-13"><a href="#cb146-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-14"><a href="#cb146-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-15"><a href="#cb146-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Top provincias con más propiedad en 2011</span></span>
<span id="cb146-16"><a href="#cb146-16" aria-hidden="true" tabindex="-1"></a>top_propiedad_2011_filtro <span class="ot">&lt;-</span> compra11 <span class="sc">%&gt;%</span></span>
<span id="cb146-17"><a href="#cb146-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Compra11Prov)) <span class="sc">%&gt;%</span></span>
<span id="cb146-18"><a href="#cb146-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(Compra11Prov, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb146-19"><a href="#cb146-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Compra11Prov, PROV_LITERAL)</span>
<span id="cb146-20"><a href="#cb146-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-21"><a href="#cb146-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-22"><a href="#cb146-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Top CCAA con más propiedad en 2011 NO FILTRO</span></span>
<span id="cb146-23"><a href="#cb146-23" aria-hidden="true" tabindex="-1"></a>top_propiedad_2011 <span class="ot">&lt;-</span> jovenes_total <span class="sc">%&gt;%</span></span>
<span id="cb146-24"><a href="#cb146-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Propiedad11Prov)) <span class="sc">%&gt;%</span></span>
<span id="cb146-25"><a href="#cb146-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">distinct</span>(Propiedad11Prov, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb146-26"><a href="#cb146-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(Propiedad11Prov, PROV_LITERAL)</span>
<span id="cb146-27"><a href="#cb146-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-28"><a href="#cb146-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-29"><a href="#cb146-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Top provincias con más compra en 2011</span></span>
<span id="cb146-30"><a href="#cb146-30" aria-hidden="true" tabindex="-1"></a>top_compra_2011 <span class="ot">&lt;-</span> compra11 <span class="sc">%&gt;%</span></span>
<span id="cb146-31"><a href="#cb146-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Compra11Prov)) <span class="sc">%&gt;%</span></span>
<span id="cb146-32"><a href="#cb146-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(Compra11Prov, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb146-33"><a href="#cb146-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Compra11Prov, PROV_LITERAL)</span>
<span id="cb146-34"><a href="#cb146-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-35"><a href="#cb146-35" aria-hidden="true" tabindex="-1"></a>top_propiedad_2021_filtro</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 52 × 2
   Propiedad21Prov PROV_LITERAL
             &lt;dbl&gt; &lt;chr&gt;       
 1            77.1 Jaén        
 2            69.5 Málaga      
 3            69.0 Córdoba     
 4            68.4 Cádiz       
 5            68.2 Ciudad Real 
 6            68.1 Sevilla     
 7            67.6 Huelva      
 8            65.9 Murcia      
 9            65.8 Albacete    
10            64.6 Badajoz     
# ℹ 42 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb148"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a>top_propiedad_2021</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 50 × 2
   Propiedad21Prov PROV_LITERAL
             &lt;dbl&gt; &lt;chr&gt;       
 1            84.2 Jaén        
 2            79.8 Ciudad Real 
 3            79.7 Córdoba     
 4            78.8 Sevilla     
 5            78.6 Albacete    
 6            78.3 Cádiz       
 7            77.6 Salamanca   
 8            77.1 Ávila       
 9            77.1 Málaga      
10            76.9 Palencia    
# ℹ 40 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb150"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a>top_propiedad_2011_filtro</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 52 × 2
   Compra11Prov PROV_LITERAL     
          &lt;dbl&gt; &lt;chr&gt;            
 1         76.6 Cádiz            
 2         76.2 Alicante/Alacant 
 3         74.9 Araba/Álava      
 4         74.3 Cantabria        
 5         74.2 Gipuzkoa         
 6         74.2 Valencia/València
 7         74.1 Sevilla          
 8         73.4 Burgos           
 9         73.3 Córdoba          
10         73.2 Valladolid       
# ℹ 42 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb152"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a>top_propiedad_2011</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 51 × 2
   Propiedad11Prov PROV_LITERAL     
             &lt;dbl&gt; &lt;chr&gt;            
 1            84.3 Alicante/Alacant 
 2            83.7 Jaén             
 3            83.4 Araba/Álava      
 4            83.3 Valencia/València
 5            83.3 Ciudad Real      
 6            83.1 Bizkaia          
 7            83.1 Burgos           
 8            83.0 Gipuzkoa         
 9            83.0 Zamora           
10            82.9 Navarra          
# ℹ 41 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb154"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a>top_compra_2011</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 52 × 2
   Compra11Prov PROV_LITERAL     
          &lt;dbl&gt; &lt;chr&gt;            
 1         76.6 Cádiz            
 2         76.2 Alicante/Alacant 
 3         74.9 Araba/Álava      
 4         74.3 Cantabria        
 5         74.2 Gipuzkoa         
 6         74.2 Valencia/València
 7         74.1 Sevilla          
 8         73.4 Burgos           
 9         73.3 Córdoba          
10         73.2 Valladolid       
# ℹ 42 more rows</code></pre>
</div>
</div>
</section>
<section id="municipios" class="level3">
<h3 class="anchored" data-anchor-id="municipios">Municipios</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb156"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Top municipios con más propiedad en 2021</span></span>
<span id="cb156-2"><a href="#cb156-2" aria-hidden="true" tabindex="-1"></a>top_propiedad_2021_filtro <span class="ot">&lt;-</span> compra21 <span class="sc">%&gt;%</span></span>
<span id="cb156-3"><a href="#cb156-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Propiedad21Mun)) <span class="sc">%&gt;%</span></span>
<span id="cb156-4"><a href="#cb156-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(Propiedad21Mun, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb156-5"><a href="#cb156-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Propiedad21Mun, PROV_LITERAL)</span>
<span id="cb156-6"><a href="#cb156-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-7"><a href="#cb156-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Top municipios con más propiedad en 2021 NO FILTRO</span></span>
<span id="cb156-8"><a href="#cb156-8" aria-hidden="true" tabindex="-1"></a>top_propiedad_2021 <span class="ot">&lt;-</span> jovenes_total <span class="sc">%&gt;%</span></span>
<span id="cb156-9"><a href="#cb156-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Propiedad21Mun)) <span class="sc">%&gt;%</span></span>
<span id="cb156-10"><a href="#cb156-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(Propiedad21Mun, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb156-11"><a href="#cb156-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Propiedad21Mun, PROV_LITERAL)</span>
<span id="cb156-12"><a href="#cb156-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-13"><a href="#cb156-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Top municipios con más propiedad en 2011</span></span>
<span id="cb156-14"><a href="#cb156-14" aria-hidden="true" tabindex="-1"></a>top_propiedad_2011 <span class="ot">&lt;-</span> compra11 <span class="sc">%&gt;%</span></span>
<span id="cb156-15"><a href="#cb156-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Compra11Mun)) <span class="sc">%&gt;%</span></span>
<span id="cb156-16"><a href="#cb156-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(Compra11Mun, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb156-17"><a href="#cb156-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Compra11Mun, PROV_LITERAL)</span>
<span id="cb156-18"><a href="#cb156-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-19"><a href="#cb156-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Top municipios con más propiedad en 2011 NO FILTRO</span></span>
<span id="cb156-20"><a href="#cb156-20" aria-hidden="true" tabindex="-1"></a>top_propiedad_2011 <span class="ot">&lt;-</span> jovenes_total <span class="sc">%&gt;%</span></span>
<span id="cb156-21"><a href="#cb156-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Propiedad11Mun)) <span class="sc">%&gt;%</span></span>
<span id="cb156-22"><a href="#cb156-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">distinct</span>(Propiedad11Mun, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb156-23"><a href="#cb156-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(Propiedad11Mun, PROV_LITERAL)</span>
<span id="cb156-24"><a href="#cb156-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-25"><a href="#cb156-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Top municipios con más compra en 2011</span></span>
<span id="cb156-26"><a href="#cb156-26" aria-hidden="true" tabindex="-1"></a>top_compra_2011 <span class="ot">&lt;-</span> compra11 <span class="sc">%&gt;%</span></span>
<span id="cb156-27"><a href="#cb156-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Compra11Mun)) <span class="sc">%&gt;%</span></span>
<span id="cb156-28"><a href="#cb156-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(Compra11Mun, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb156-29"><a href="#cb156-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Compra11Mun, PROV_LITERAL)</span>
<span id="cb156-30"><a href="#cb156-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-31"><a href="#cb156-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Top provincias con más herencia en 2011</span></span>
<span id="cb156-32"><a href="#cb156-32" aria-hidden="true" tabindex="-1"></a>top_compra_2021 <span class="ot">&lt;-</span> compra11 <span class="sc">%&gt;%</span></span>
<span id="cb156-33"><a href="#cb156-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Herencia11Mun)) <span class="sc">%&gt;%</span></span>
<span id="cb156-34"><a href="#cb156-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(Herencia11Mun, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb156-35"><a href="#cb156-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Herencia11Mun, PROV_LITERAL)</span>
<span id="cb156-36"><a href="#cb156-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-37"><a href="#cb156-37" aria-hidden="true" tabindex="-1"></a>top_propiedad_2021_filtro</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 768 × 2
   Propiedad21Mun PROV_LITERAL
            &lt;dbl&gt; &lt;chr&gt;       
 1           91.3 Jaén        
 2           86.8 Jaén        
 3           86.8 Ciudad Real 
 4           85.7 Burgos      
 5           85.6 Salamanca   
 6           85.1 Murcia      
 7           84.5 Huelva      
 8           84.2 Jaén        
 9           83.7 Ourense     
10           82.9 Jaén        
# ℹ 758 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb158"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a>top_propiedad_2021</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 502 × 2
   Propiedad21Mun PROV_LITERAL    
            &lt;dbl&gt; &lt;chr&gt;           
 1           92.1 Jaén            
 2           91.7 Salamanca       
 3           88.1 Alicante/Alacant
 4           87.8 Jaén            
 5           87.6 Málaga          
 6           87.6 Salamanca       
 7           87.4 Sevilla         
 8           87.3 León            
 9           86.8 Balears, Illes  
10           86.8 Málaga          
# ℹ 492 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb160"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a>top_propiedad_2011_filtro</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 52 × 2
   Compra11Prov PROV_LITERAL     
          &lt;dbl&gt; &lt;chr&gt;            
 1         76.6 Cádiz            
 2         76.2 Alicante/Alacant 
 3         74.9 Araba/Álava      
 4         74.3 Cantabria        
 5         74.2 Gipuzkoa         
 6         74.2 Valencia/València
 7         74.1 Sevilla          
 8         73.4 Burgos           
 9         73.3 Córdoba          
10         73.2 Valladolid       
# ℹ 42 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb162"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a>top_propiedad_2011</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 476 × 2
   Propiedad11Mun PROV_LITERAL     
            &lt;dbl&gt; &lt;chr&gt;            
 1           94.3 Zamora           
 2           92.6 Alicante/Alacant 
 3           92   Jaén             
 4           91.7 Valencia/València
 5           91.3 Málaga           
 6           91.0 Madrid           
 7           90.9 Soria            
 8           90.9 Sevilla          
 9           90.9 Jaén             
10           90.8 Valencia/València
# ℹ 466 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb164"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true" tabindex="-1"></a>top_compra_2011</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 541 × 2
   Compra11Mun PROV_LITERAL     
         &lt;dbl&gt; &lt;chr&gt;            
 1        92.7 Zamora           
 2        90.4 Madrid           
 3        90.1 Alicante/Alacant 
 4        89.7 Albacete         
 5        89.6 Sevilla          
 6        89.4 Jaén             
 7        89.2 Sevilla          
 8        88.9 Valencia/València
 9        88.4 Alicante/Alacant 
10        88.1 Sevilla          
# ℹ 531 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb166"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true" tabindex="-1"></a>top_compra_2011</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 541 × 2
   Compra11Mun PROV_LITERAL     
         &lt;dbl&gt; &lt;chr&gt;            
 1        92.7 Zamora           
 2        90.4 Madrid           
 3        90.1 Alicante/Alacant 
 4        89.7 Albacete         
 5        89.6 Sevilla          
 6        89.4 Jaén             
 7        89.2 Sevilla          
 8        88.9 Valencia/València
 9        88.4 Alicante/Alacant 
10        88.1 Sevilla          
# ℹ 531 more rows</code></pre>
</div>
</div>
</section>
</section>
<section id="diferencia-entre-años" class="level2">
<h2 class="anchored" data-anchor-id="diferencia-entre-años">Diferencia entre años</h2>
<p>Juntar tablas</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb168"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true" tabindex="-1"></a>compra11_mun <span class="ot">&lt;-</span> compra11 <span class="sc">|&gt;</span> </span>
<span id="cb168-2"><a href="#cb168-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(cusec, <span class="at">.keep_all=</span>T)</span>
<span id="cb168-3"><a href="#cb168-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb168-4"><a href="#cb168-4" aria-hidden="true" tabindex="-1"></a>compra21_mun <span class="ot">&lt;-</span> compra21 <span class="sc">|&gt;</span> </span>
<span id="cb168-5"><a href="#cb168-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(cusec, <span class="at">.keep_all=</span>T)</span>
<span id="cb168-6"><a href="#cb168-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb168-7"><a href="#cb168-7" aria-hidden="true" tabindex="-1"></a>compra_total_mun <span class="ot">&lt;-</span> compra11_mun <span class="sc">|&gt;</span> </span>
<span id="cb168-8"><a href="#cb168-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(compra21_mun, <span class="at">by =</span> <span class="st">"cusec"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb168-9"><a href="#cb168-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename_with</span>(<span class="sc">~</span><span class="fu">str_replace</span>(., <span class="st">"</span><span class="sc">\\</span><span class="st">.y$"</span>, <span class="st">""</span>), <span class="at">.cols =</span> <span class="fu">ends_with</span>(<span class="st">".y"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb168-10"><a href="#cb168-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">ends_with</span>(<span class="st">".x"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb168-11"><a href="#cb168-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(cusec, <span class="at">.keep_all=</span>T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="por-municipio-1" class="level3">
<h3 class="anchored" data-anchor-id="por-municipio-1">Por municipio</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb169"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Propiedad</span></span>
<span id="cb169-2"><a href="#cb169-2" aria-hidden="true" tabindex="-1"></a>compra_total_mun <span class="ot">&lt;-</span> compra_total_mun <span class="sc">|&gt;</span> </span>
<span id="cb169-3"><a href="#cb169-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb169-4"><a href="#cb169-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">PropiedadDifMun =</span> Propiedad21Mun <span class="sc">-</span> Compra11Mun)</span>
<span id="cb169-5"><a href="#cb169-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb169-6"><a href="#cb169-6" aria-hidden="true" tabindex="-1"></a>compra_total_mun <span class="sc">%&gt;%</span></span>
<span id="cb169-7"><a href="#cb169-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">distinct</span>(PropiedadDifMun, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb169-8"><a href="#cb169-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(PropiedadDifMun)) <span class="sc">%&gt;%</span></span>
<span id="cb169-9"><a href="#cb169-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(PropiedadDifMun, MUN_LITERAL, PROV_LITERAL, CMUN)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 529 × 4
   PropiedadDifMun MUN_LITERAL  PROV_LITERAL CMUN 
             &lt;dbl&gt; &lt;chr&gt;        &lt;chr&gt;        &lt;chr&gt;
 1            32.3 &lt;=2000       Lugo         991  
 2            26.3 Nerja        Málaga       075  
 3            22.4 &lt;=2000       Jaén         991  
 4            21.3 &lt;=2000       Coruña, A    991  
 5            20.1 2001 &lt;= 5000 Lugo         992  
 6            20.0 &lt;=2000       Málaga       991  
 7            18.9 Úbeda        Jaén         092  
 8            18.7 2001 &lt;= 5000 Huesca       992  
 9            18.4 &lt;=2000       Teruel       991  
10            17.2 &lt;=2000       Ourense      991  
# ℹ 519 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb171"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Alquiler</span></span>
<span id="cb171-2"><a href="#cb171-2" aria-hidden="true" tabindex="-1"></a>compra_total_mun <span class="ot">&lt;-</span> compra_total_mun <span class="sc">|&gt;</span> </span>
<span id="cb171-3"><a href="#cb171-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb171-4"><a href="#cb171-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">AlquilerDifMun =</span> Alquiler21Mun <span class="sc">-</span> Alquiler11Mun)</span>
<span id="cb171-5"><a href="#cb171-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb171-6"><a href="#cb171-6" aria-hidden="true" tabindex="-1"></a>compra_total_mun <span class="sc">%&gt;%</span></span>
<span id="cb171-7"><a href="#cb171-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">distinct</span>(AlquilerDifMun, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb171-8"><a href="#cb171-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(AlquilerDifMun)) <span class="sc">%&gt;%</span></span>
<span id="cb171-9"><a href="#cb171-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(AlquilerDifMun, MUN_LITERAL, PROV_LITERAL, CMUN)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 529 × 4
   AlquilerDifMun MUN_LITERAL       PROV_LITERAL      CMUN 
            &lt;dbl&gt; &lt;chr&gt;             &lt;chr&gt;             &lt;chr&gt;
 1           37.2 2001 &lt;= 5000      Araba/Álava       992  
 2           35.2 &lt;=2000            Araba/Álava       991  
 3           34.5 Alfafar           Valencia/València 022  
 4           33.2 Mollet del Vallès Barcelona         124  
 5           31.6 Catarroja         Valencia/València 094  
 6           30.0 Alaquàs           Valencia/València 005  
 7           29.8 Ponferrada        León              115  
 8           29.4 Picassent         Valencia/València 194  
 9           27.0 Valdemoro         Madrid            161  
10           26.3 &lt;=2000            Gipuzkoa          991  
# ℹ 519 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb173"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Otro</span></span>
<span id="cb173-2"><a href="#cb173-2" aria-hidden="true" tabindex="-1"></a>compra_total_mun <span class="ot">&lt;-</span> compra_total_mun <span class="sc">|&gt;</span> </span>
<span id="cb173-3"><a href="#cb173-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb173-4"><a href="#cb173-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">OtroDifProv =</span> Otro21Mun <span class="sc">-</span> Otro11Mun)</span>
<span id="cb173-5"><a href="#cb173-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb173-6"><a href="#cb173-6" aria-hidden="true" tabindex="-1"></a>compra_total_mun <span class="sc">%&gt;%</span></span>
<span id="cb173-7"><a href="#cb173-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">distinct</span>(OtroDifProv, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb173-8"><a href="#cb173-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(OtroDifProv)) <span class="sc">%&gt;%</span></span>
<span id="cb173-9"><a href="#cb173-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(OtroDifProv, MUN_LITERAL, PROV_LITERAL, CMUN)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 507 × 4
   OtroDifProv MUN_LITERAL             PROV_LITERAL CMUN 
         &lt;dbl&gt; &lt;chr&gt;                   &lt;chr&gt;        &lt;chr&gt;
 1        26.7 Oleiros                 Coruña, A    058  
 2        23.7 Teguise                 Palmas, Las  024  
 3        22.7 5001 &lt;= 10000           Teruel       993  
 4        20.0 Estrada, A              Pontevedra   017  
 5        18.8 &lt;=2000                  Palmas, Las  991  
 6        18.8 2001 &lt;= 5000            Zamora       992  
 7        17.7 Castro-Urdiales         Cantabria    020  
 8        17.4 Don Benito              Badajoz      044  
 9        17.3 Villanueva de la Serena Badajoz      153  
10        16.1 Almansa                 Albacete     009  
# ℹ 497 more rows</code></pre>
</div>
</div>
</section>
<section id="por-provincia-1" class="level3">
<h3 class="anchored" data-anchor-id="por-provincia-1">Por provincia</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb175"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a><span class="co">#  Propiedad</span></span>
<span id="cb175-2"><a href="#cb175-2" aria-hidden="true" tabindex="-1"></a>compra_total_mun <span class="ot">&lt;-</span> compra_total_mun <span class="sc">|&gt;</span></span>
<span id="cb175-3"><a href="#cb175-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(CPRO) <span class="sc">|&gt;</span> </span>
<span id="cb175-4"><a href="#cb175-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb175-5"><a href="#cb175-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">PropiedadDifProv =</span> Propiedad21Prov <span class="sc">-</span> Compra11Prov) <span class="sc">|&gt;</span> </span>
<span id="cb175-6"><a href="#cb175-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb175-7"><a href="#cb175-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb175-8"><a href="#cb175-8" aria-hidden="true" tabindex="-1"></a>compra_total_mun <span class="sc">%&gt;%</span></span>
<span id="cb175-9"><a href="#cb175-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">distinct</span>(PropiedadDifProv, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb175-10"><a href="#cb175-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(PropiedadDifProv)) <span class="sc">%&gt;%</span></span>
<span id="cb175-11"><a href="#cb175-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(PropiedadDifProv, MUN_LITERAL, PROV_LITERAL, CMUN)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 53 × 4
   PropiedadDifProv MUN_LITERAL   PROV_LITERAL CMUN 
              &lt;dbl&gt; &lt;chr&gt;         &lt;chr&gt;        &lt;chr&gt;
 1            10.1  &lt;=2000        Teruel       991  
 2             7.03 2001 &lt;= 5000  Lugo         992  
 3             6.35 &lt;=2000        Cuenca       991  
 4             5.77 &lt;=2000        Jaén         991  
 5             5.33 &lt;=2000        Cáceres      991  
 6             5.31 5001 &lt;= 10000 Ourense      993  
 7             3.67 Ceuta         Ceuta        001  
 8             1.28 5001 &lt;= 10000 Málaga       993  
 9            -0.5  2001 &lt;= 5000  Pontevedra   992  
10            -2.02 &lt;=2000        Huesca       991  
# ℹ 43 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb177"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Alquiler</span></span>
<span id="cb177-2"><a href="#cb177-2" aria-hidden="true" tabindex="-1"></a>compra_total_mun <span class="ot">&lt;-</span> compra_total_mun <span class="sc">|&gt;</span></span>
<span id="cb177-3"><a href="#cb177-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(CPRO) <span class="sc">|&gt;</span> </span>
<span id="cb177-4"><a href="#cb177-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb177-5"><a href="#cb177-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">AlquilerDifProv =</span> Alquiler21Prov <span class="sc">-</span> Alquiler11Prov) <span class="sc">|&gt;</span> </span>
<span id="cb177-6"><a href="#cb177-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb177-7"><a href="#cb177-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb177-8"><a href="#cb177-8" aria-hidden="true" tabindex="-1"></a>compra_total_mun <span class="sc">%&gt;%</span></span>
<span id="cb177-9"><a href="#cb177-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">distinct</span>(AlquilerDifProv, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb177-10"><a href="#cb177-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(AlquilerDifProv)) <span class="sc">%&gt;%</span></span>
<span id="cb177-11"><a href="#cb177-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(AlquilerDifProv, MUN_LITERAL, PROV_LITERAL, CMUN)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 53 × 4
   AlquilerDifProv MUN_LITERAL   PROV_LITERAL      CMUN 
             &lt;dbl&gt; &lt;chr&gt;         &lt;chr&gt;             &lt;chr&gt;
 1            25.8 2001 &lt;= 5000  Araba/Álava       992  
 2            23.6 &lt;=2000        Gipuzkoa          991  
 3            19.3 5001 &lt;= 10000 Bizkaia           993  
 4            16.8 &lt;=2000        Zaragoza          991  
 5            16.1 &lt;=2000        Valencia/València 991  
 6            15.6 &lt;=2000        Palencia          991  
 7            15   &lt;=2000        Guadalajara       991  
 8            14.8 &lt;=2000        Valladolid        991  
 9            14.5 &lt;=2000        Barcelona         991  
10            14.0 &lt;=2000        León              991  
# ℹ 43 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb179"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Otro</span></span>
<span id="cb179-2"><a href="#cb179-2" aria-hidden="true" tabindex="-1"></a>compra_total_mun <span class="ot">&lt;-</span> compra_total_mun <span class="sc">|&gt;</span></span>
<span id="cb179-3"><a href="#cb179-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(CPRO) <span class="sc">|&gt;</span> </span>
<span id="cb179-4"><a href="#cb179-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb179-5"><a href="#cb179-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">OtroDifProv =</span> Otro21Prov <span class="sc">-</span> Otro11Prov) <span class="sc">|&gt;</span> </span>
<span id="cb179-6"><a href="#cb179-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb179-7"><a href="#cb179-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb179-8"><a href="#cb179-8" aria-hidden="true" tabindex="-1"></a>compra_total_mun <span class="sc">%&gt;%</span></span>
<span id="cb179-9"><a href="#cb179-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">distinct</span>(OtroDifProv, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb179-10"><a href="#cb179-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(OtroDifProv)) <span class="sc">%&gt;%</span></span>
<span id="cb179-11"><a href="#cb179-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(OtroDifProv, MUN_LITERAL, PROV_LITERAL, CMUN)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 53 × 4
   OtroDifProv MUN_LITERAL   PROV_LITERAL CMUN 
         &lt;dbl&gt; &lt;chr&gt;         &lt;chr&gt;        &lt;chr&gt;
 1        8.69 2001 &lt;= 5000  Cantabria    992  
 2        7.89 &lt;=2000        Asturias     991  
 3        7.15 5001 &lt;= 10000 Palmas, Las  993  
 4        7.1  &lt;=2000        Valladolid   991  
 5        6.68 &lt;=2000        Badajoz      991  
 6        6.43 &lt;=2000        Almería      991  
 7        6.37 &lt;=2000        Teruel       991  
 8        6.31 5001 &lt;= 10000 Coruña, A    993  
 9        6.12 2001 &lt;= 5000  Toledo       992  
10        6.06 &lt;=2000        Segovia      991  
# ℹ 43 more rows</code></pre>
</div>
</div>
<p>analizar los municinipios..</p>
<p>Hacer el analisis de componentes pero con las varibales que hablamos y con este perfil de solo compra (?)</p>
</section>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>